if(dwr==null){var dwr={}}if(dwr.engine==null){dwr.engine={}}if(DWREngine==null){var DWREngine=dwr.engine}dwr.engine.setErrorHandler=function(a){dwr.engine._errorHandler=a};dwr.engine.setWarningHandler=function(a){dwr.engine._warningHandler=a};dwr.engine.setTextHtmlHandler=function(a){dwr.engine._textHtmlHandler=a};dwr.engine.setTimeout=function(a){dwr.engine._timeout=a};dwr.engine.setPreHook=function(a){dwr.engine._preHook=a};dwr.engine.setPostHook=function(a){dwr.engine._postHook=a};dwr.engine.setHeaders=function(a){dwr.engine._headers=a};dwr.engine.setParameters=function(a){dwr.engine._parameters=a};dwr.engine.XMLHttpRequest=1;dwr.engine.IFrame=2;dwr.engine.ScriptTag=3;dwr.engine.setRpcType=function(a){if(a!=dwr.engine.XMLHttpRequest&&a!=dwr.engine.IFrame&&a!=dwr.engine.ScriptTag){dwr.engine._handleError(null,{name:"dwr.engine.invalidRpcType",message:"RpcType must be one of dwr.engine.XMLHttpRequest or dwr.engine.IFrame or dwr.engine.ScriptTag"});return}dwr.engine._rpcType=a};dwr.engine.setHttpMethod=function(a){if(a!="GET"&&a!="POST"){dwr.engine._handleError(null,{name:"dwr.engine.invalidHttpMethod",message:"Remoting method must be one of GET or POST"});return}dwr.engine._httpMethod=a};dwr.engine.setOrdered=function(a){dwr.engine._ordered=a};dwr.engine.setAsync=function(a){dwr.engine._async=a};dwr.engine.setActiveReverseAjax=function(a){if(a){if(dwr.engine._activeReverseAjax){return}dwr.engine._activeReverseAjax=true;dwr.engine._poll()}else{if(dwr.engine._activeReverseAjax&&dwr.engine._pollReq){dwr.engine._pollReq.abort()}dwr.engine._activeReverseAjax=false}};dwr.engine.defaultErrorHandler=function(b,a){dwr.engine._debug("Error: "+a.name+", "+a.message,true);if(b==null||b==""){alert("A server error has occurred.")}else{if(b.indexOf("0x80040111")!=-1){dwr.engine._debug(b)}else{alert(b)}}};dwr.engine.defaultWarningHandler=function(b,a){dwr.engine._debug(b)};dwr.engine.beginBatch=function(){if(dwr.engine._batch){dwr.engine._handleError(null,{name:"dwr.engine.batchBegun",message:"Batch already begun"});return}dwr.engine._batch=dwr.engine._createBatch()};dwr.engine.endBatch=function(b){var a=dwr.engine._batch;if(a==null){dwr.engine._handleError(null,{name:"dwr.engine.batchNotBegun",message:"No batch in progress"});return}dwr.engine._batch=null;if(a.map.callCount==0){return}if(b){dwr.engine._mergeBatch(a,b)}if(dwr.engine._ordered&&dwr.engine._batchesLength!=0){dwr.engine._batchQueue[dwr.engine._batchQueue.length]=a}else{dwr.engine._sendData(a)}};dwr.engine.setPollMethod=function(a){dwr.engine.setPollType(a)};dwr.engine.setMethod=function(a){dwr.engine.setRpcType(a)};dwr.engine.setVerb=function(a){dwr.engine.setHttpMethod(a)};dwr.engine.setPollType=function(){dwr.engine._debug("Manually setting the Poll Type is not supported")};dwr.engine._scriptSessionId=null;dwr.engine._getScriptSessionId=function(){if(dwr.engine._scriptSessionId==null){dwr.engine._scriptSessionId=dwr.engine._origScriptSessionId+Math.floor(Math.random()*1000)}return dwr.engine._scriptSessionId};dwr.engine._errorHandler=dwr.engine.defaultErrorHandler;dwr.engine._warningHandler=dwr.engine.defaultWarningHandler;dwr.engine._preHook=null;dwr.engine._postHook=null;dwr.engine._batches={};dwr.engine._batchesLength=0;dwr.engine._batchQueue=[];dwr.engine._rpcType=dwr.engine.XMLHttpRequest;dwr.engine._httpMethod="POST";dwr.engine._ordered=false;dwr.engine._async=true;dwr.engine._batch=null;dwr.engine._timeout=0;dwr.engine._DOMDocument=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.5.0","Msxml2.DOMDocument.4.0","Msxml2.DOMDocument.3.0","MSXML2.DOMDocument","MSXML.DOMDocument","Microsoft.XMLDOM"];dwr.engine._XMLHTTP=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"];dwr.engine._activeReverseAjax=false;dwr.engine._outstandingIFrames=[];dwr.engine._pollReq=null;dwr.engine._pollCometInterval=200;dwr.engine._pollRetries=0;dwr.engine._maxPollRetries=0;dwr.engine._textHtmlHandler=null;dwr.engine._headers={"X-J-Token":_jive_auth_token};dwr.engine._parameters=null;dwr.engine._postSeperator="\n";dwr.engine._defaultInterceptor=function(a){return a};dwr.engine._urlRewriteHandler=dwr.engine._defaultInterceptor;dwr.engine._contentRewriteHandler=dwr.engine._defaultInterceptor;dwr.engine._replyRewriteHandler=dwr.engine._defaultInterceptor;dwr.engine._nextBatchId=0;dwr.engine._propnames=["rpcType","httpMethod","async","timeout","errorHandler","warningHandler","textHtmlHandler"];dwr.engine._partialResponseNo=0;dwr.engine._partialResponseYes=1;dwr.engine._partialResponseFlush=2;dwr.engine._unloading=false;dwr.engine._execute=function(l,b,j,h){var e=false;if(dwr.engine._batch==null){dwr.engine.beginBatch();e=true}var d=dwr.engine._batch;var g=[];for(var c=0;c<arguments.length-3;c++){g[c]=arguments[c+3]}if(d.path==null){d.path=l}else{if(d.path!=l){dwr.engine._handleError(d,{name:"dwr.engine.multipleServlets",message:"Can't batch requests to multiple DWR Servlets."});return}}var a;var k=g[g.length-1];if(typeof k=="function"||k==null){a={callback:g.pop()}}else{a=g.pop()}dwr.engine._mergeBatch(d,a);d.handlers[d.map.callCount]={exceptionHandler:a.exceptionHandler,callback:a.callback};var f="c"+d.map.callCount+"-";d.map[f+"scriptName"]=b;d.map[f+"methodName"]=j;d.map[f+"id"]=d.map.callCount;for(c=0;c<g.length;c++){dwr.engine._serializeAll(d,[],g[c],f+"param"+c)}d.map.callCount++;if(e){dwr.engine.endBatch()}};dwr.engine._poll=function(){if(!dwr.engine._activeReverseAjax){return}var a=dwr.engine._createBatch();a.map.id=0;a.map.callCount=1;a.isPoll=true;if(dwr.engine._pollWithXhr=="true"){a.rpcType=dwr.engine.XMLHttpRequest;a.map.partialResponse=dwr.engine._partialResponseNo}else{if(navigator.userAgent.indexOf("Gecko/")!=-1){a.rpcType=dwr.engine.XMLHttpRequest;a.map.partialResponse=dwr.engine._partialResponseYes}else{a.rpcType=dwr.engine.XMLHttpRequest;a.map.partialResponse=dwr.engine._partialResponseNo}}a.httpMethod="POST";a.async=true;a.timeout=0;a.path=dwr.engine._defaultPath;a.preHooks=[];a.postHooks=[];a.errorHandler=dwr.engine._pollErrorHandler;a.warningHandler=dwr.engine._pollErrorHandler;a.handlers[0]={callback:function(b){dwr.engine._pollRetries=0;setTimeout(dwr.engine._poll,b)}};dwr.engine._sendData(a);if(a.rpcType==dwr.engine.XMLHttpRequest&&a.map.partialResponse==dwr.engine._partialResponseYes){dwr.engine._checkCometPoll()}};dwr.engine._pollErrorHandler=function(b,a){dwr.engine._pollRetries++;dwr.engine._debug("Reverse Ajax poll failed (pollRetries="+dwr.engine._pollRetries+"): "+a.name+" : "+a.message);if(dwr.engine._pollRetries<dwr.engine._maxPollRetries){setTimeout(dwr.engine._poll,10000)}else{dwr.engine._activeReverseAjax=false;dwr.engine._debug("Giving up.")}};dwr.engine._createBatch=function(){var a={map:{callCount:0,page:window.location.pathname+window.location.search,httpSessionId:dwr.engine._getJSessionId(),scriptSessionId:dwr.engine._getScriptSessionId()},charsProcessed:0,paramCount:0,parameters:{},headers:{},isPoll:false,handlers:{},preHooks:[],postHooks:[],rpcType:dwr.engine._rpcType,httpMethod:dwr.engine._httpMethod,async:dwr.engine._async,timeout:dwr.engine._timeout,errorHandler:dwr.engine._errorHandler,warningHandler:dwr.engine._warningHandler,textHtmlHandler:dwr.engine._textHtmlHandler};if(dwr.engine._preHook){a.preHooks.push(dwr.engine._preHook)}if(dwr.engine._postHook){a.postHooks.push(dwr.engine._postHook)}var c,b;if(dwr.engine._headers){for(c in dwr.engine._headers){b=dwr.engine._headers[c];if(typeof b!="function"){a.headers[c]=b}}}if(dwr.engine._parameters){for(c in dwr.engine._parameters){b=dwr.engine._parameters[c];if(typeof b!="function"){a.parameters[c]=b}}}return a};dwr.engine._mergeBatch=function(a,d){var e,c;for(var b=0;b<dwr.engine._propnames.length;b++){e=dwr.engine._propnames[b];if(d[e]!=null){a[e]=d[e]}}if(d.preHook!=null){a.preHooks.unshift(d.preHook)}if(d.postHook!=null){a.postHooks.push(d.postHook)}if(d.headers){for(e in d.headers){c=d.headers[e];if(typeof c!="function"){a.headers[e]=c}}}if(d.parameters){for(e in d.parameters){c=d.parameters[e];if(typeof c!="function"){a.map["p-"+e]=""+c}}}};dwr.engine._getJSessionId=function(){var c=document.cookie.split(";");for(var b=0;b<c.length;b++){var a=c[b];while(a.charAt(0)==" "){a=a.substring(1,a.length)}if(a.indexOf(dwr.engine._sessionCookieName+"=")==0){return a.substring(dwr.engine._sessionCookieName.length+1,a.length)}}return""};dwr.engine._checkCometPoll=function(){for(var b=0;b<dwr.engine._outstandingIFrames.length;b++){var e="";var c=dwr.engine._outstandingIFrames[b];try{e=dwr.engine._getTextFromCometIFrame(c)}catch(a){dwr.engine._handleWarning(c.batch,a)}if(e!=""){dwr.engine._processCometResponse(e,c.batch)}}if(dwr.engine._pollReq){var d=dwr.engine._pollReq;var e=d.responseText;if(e!=null){dwr.engine._processCometResponse(e,d.batch)}}if(dwr.engine._outstandingIFrames.length>0||dwr.engine._pollReq){setTimeout(dwr.engine._checkCometPoll,dwr.engine._pollCometInterval)}};dwr.engine._getTextFromCometIFrame=function(b){var a=b.contentWindow.document.body;if(a==null){return""}var c=a.innerHTML;if(c.indexOf("<PRE>")==0||c.indexOf("<pre>")==0){c=c.substring(5,c.length-7)}return c};dwr.engine._processCometResponse=function(d,e){if(e.charsProcessed==d.length){return}if(d.length==0){e.charsProcessed=0;return}var b=d.indexOf("//#DWR-START#",e.charsProcessed);if(b==-1){e.charsProcessed=d.length;return}var a=d.lastIndexOf("//#DWR-END#");if(a==-1){return}if(d.charCodeAt(a+11)==13&&d.charCodeAt(a+12)==10){e.charsProcessed=a+13}else{e.charsProcessed=a+11}var c=d.substring(b+13,a);dwr.engine._receivedBatch=e;dwr.engine._eval(c);dwr.engine._receivedBatch=null};dwr.engine._sendData=function(e){e.map.batchId=dwr.engine._nextBatchId;dwr.engine._nextBatchId++;dwr.engine._batches[e.map.batchId]=e;dwr.engine._batchesLength++;e.completed=false;for(var d=0;d<e.preHooks.length;d++){e.preHooks[d]()}e.preHooks=null;if(e.timeout&&e.timeout!=0){e.timeoutId=setTimeout(function(){dwr.engine._abortRequest(e)},e.timeout)}if(e.rpcType==dwr.engine.XMLHttpRequest){if(window.XMLHttpRequest){e.req=new XMLHttpRequest()}else{if(window.ActiveXObject&&!(navigator.userAgent.indexOf("Mac")>=0&&navigator.userAgent.indexOf("MSIE")>=0)){e.req=dwr.engine._newActiveXObject(dwr.engine._XMLHTTP)}}}var a,c;if(e.req){if(e.async){e.req.onreadystatechange=function(){if(typeof dwr!="undefined"){dwr.engine._stateChange(e)}}}if(e.isPoll){dwr.engine._pollReq=e.req;if(!(document.all&&!window.opera)){e.req.batch=e}}var b=navigator.userAgent.indexOf("Safari/");if(b>=0){var g=navigator.userAgent.substring(b+7);if(parseInt(g,10)<400){if(dwr.engine._allowGetForSafariButMakeForgeryEasier=="true"){e.httpMethod="GET"}else{dwr.engine._handleWarning(e,{name:"dwr.engine.oldSafari",message:"Safari GET support disabled. See getahead.org/dwr/server/servlet and allowGetForSafariButMakeForgeryEasier."})}}}e.mode=e.isPoll?dwr.engine._ModePlainPoll:dwr.engine._ModePlainCall;c=dwr.engine._constructRequest(e);try{e.req.open(e.httpMethod,c.url,e.async);try{for(a in e.headers){var j=e.headers[a];if(typeof j=="string"){e.req.setRequestHeader(a,j)}}if(!e.headers["Content-Type"]){e.req.setRequestHeader("Content-Type","text/plain")}}catch(h){dwr.engine._handleWarning(e,h)}e.req.send(c.body);if(!e.async){dwr.engine._stateChange(e)}}catch(h){dwr.engine._handleError(e,h)}}else{if(e.rpcType!=dwr.engine.ScriptTag){var f=e.isPoll?"dwr-if-poll-"+e.map.batchId:"dwr-if-"+e.map.batchId;e.div=document.createElement("div");document.body.appendChild(e.div);e.div.innerHTML="<iframe src='javascript:void(0)' frameborder='0' style='width:0px;height:0px;border:0;' id='"+f+"' name='"+f+"' onload='dwr.engine._iframeLoadingComplete ("+e.map.batchId+");'></iframe>";e.document=document;e.iframe=e.document.getElementById(f);e.iframe.batch=e;e.mode=e.isPoll?dwr.engine._ModeHtmlPoll:dwr.engine._ModeHtmlCall;if(e.isPoll){dwr.engine._outstandingIFrames.push(e.iframe)}c=dwr.engine._constructRequest(e);if(e.httpMethod=="GET"){e.iframe.setAttribute("src",c.url)}else{e.form=e.document.createElement("form");e.form.setAttribute("id","dwr-form");e.form.setAttribute("action",c.url);e.form.setAttribute("style","display:none;");e.form.setAttribute("target",f);e.form.target=f;e.form.setAttribute("method",e.httpMethod);for(a in e.map){var j=e.map[a];if(typeof j!="function"){var k=e.document.createElement("input");k.setAttribute("type","hidden");k.setAttribute("name",a);k.setAttribute("value",j);e.form.appendChild(k)}}e.document.body.appendChild(e.form);e.form.submit()}}else{e.httpMethod="GET";e.mode=e.isPoll?dwr.engine._ModePlainPoll:dwr.engine._ModePlainCall;c=dwr.engine._constructRequest(e);e.script=document.createElement("script");e.script.id="dwr-st-"+e.map["c0-id"];e.script.src=c.url;document.body.appendChild(e.script)}}};dwr.engine._ModePlainCall="/call/plaincall/";dwr.engine._ModeHtmlCall="/call/htmlcall/";dwr.engine._ModePlainPoll="/call/plainpoll/";dwr.engine._ModeHtmlPoll="/call/htmlpoll/";dwr.engine._constructRequest=function(b){var c={url:b.path+b.mode,body:null};if(b.isPoll==true){c.url+="ReverseAjax.dwr"}else{if(b.map.callCount==1){c.url+=b.map["c0-scriptName"]+"."+b.map["c0-methodName"]+".dwr"}else{c.url+="Multiple."+b.map.callCount+".dwr"}}var e=location.href.match(/jsessionid=([^?]+)/);if(e!=null){c.url+=";jsessionid="+e[1]}var d;if(b.httpMethod=="GET"){b.map.callCount=""+b.map.callCount;c.url+="?";for(d in b.map){if(typeof b.map[d]!="function"){c.url+=encodeURIComponent(d)+"="+encodeURIComponent(b.map[d])+"&"}}c.url=c.url.substring(0,c.url.length-1)}else{c.body="";if(document.all&&!window.opera){var a=[];for(d in b.map){if(typeof b.map[d]!="function"){a.push(d+"="+b.map[d]+dwr.engine._postSeperator)}}c.body=a.join("")}else{for(d in b.map){if(typeof b.map[d]!="function"){c.body+=d+"="+b.map[d]+dwr.engine._postSeperator}}}c.body=dwr.engine._contentRewriteHandler(c.body)}c.url=dwr.engine._urlRewriteHandler(c.url);return c};dwr.engine._stateChange=function(c){var b;if(c.completed){dwr.engine._debug("Error: _stateChange() with batch.completed");return}var f=c.req;try{if(f.readyState!=4){return}}catch(d){dwr.engine._handleWarning(c,d);dwr.engine._clearUp(c);return}if(dwr.engine._unloading){dwr.engine._debug("Ignoring reply from server as page is unloading.");return}try{var e=f.responseText;e=dwr.engine._replyRewriteHandler(e);var a=f.status;if(e==null||e==""){dwr.engine._handleWarning(c,{name:"dwr.engine.missingData",message:"No data received from server"})}else{if(a!=200){dwr.engine._handleError(c,{name:"dwr.engine.http."+a,message:f.statusText})}else{var g=f.getResponseHeader("Content-Type");if(!g.match(/^text\/plain/)&&!g.match(/^text\/javascript/)){if(g.match(/^text\/html/)&&typeof c.textHtmlHandler=="function"){c.textHtmlHandler({status:a,responseText:e,contentType:g})}else{dwr.engine._handleWarning(c,{name:"dwr.engine.invalidMimeType",message:"Invalid content type: '"+g+"'"})}}else{if(c.isPoll&&c.map.partialResponse==dwr.engine._partialResponseYes){dwr.engine._processCometResponse(e,c)}else{if(e.search("//#DWR")==-1){dwr.engine._handleWarning(c,{name:"dwr.engine.invalidReply",message:"Invalid reply from server"})}else{b=e}}}}}}catch(d){dwr.engine._handleWarning(c,d)}dwr.engine._callPostHooks(c);dwr.engine._receivedBatch=c;if(b!=null){b=b.replace(dwr.engine._scriptTagProtection,"")}dwr.engine._eval(b);dwr.engine._receivedBatch=null;dwr.engine._validateBatch(c);if(!c.completed){dwr.engine._clearUp(c)}};dwr.engine._validateBatch=function(a){if(!a.completed){for(var b=0;b<a.map.callCount;b++){if(a.handlers[b]!=null){dwr.engine._handleWarning(a,{name:"dwr.engine.incompleteReply",message:"Incomplete reply from server"});break}}}};dwr.engine._iframeLoadingComplete=function(a){var b=dwr.engine._batches[a];if(b){dwr.engine._validateBatch(b)}};dwr.engine._remoteHandleCallback=function(a,f,e){var c=dwr.engine._batches[a];if(c==null){dwr.engine._debug("Warning: batch == null in remoteHandleCallback for batchId="+a,true);return}try{var b=c.handlers[f];c.handlers[f]=null;if(!b){dwr.engine._debug("Warning: Missing handlers. callId="+f,true)}else{if(typeof b.callback=="function"){b.callback(e)}}}catch(d){dwr.engine._handleError(c,d)}};dwr.engine._remoteHandleException=function(a,e,d){var c=dwr.engine._batches[a];if(c==null){dwr.engine._debug("Warning: null batch in remoteHandleException",true);return}var b=c.handlers[e];c.handlers[e]=null;if(b==null){dwr.engine._debug("Warning: null handlers in remoteHandleException",true);return}if(d.message==undefined){d.message=""}if(typeof b.exceptionHandler=="function"){b.exceptionHandler(d.message,d)}else{if(typeof c.errorHandler=="function"){c.errorHandler(d.message,d)}}};dwr.engine._remoteHandleBatchException=function(c,a){var b=(dwr.engine._receivedBatch==null&&a!=null);if(b){dwr.engine._receivedBatch=dwr.engine._batches[a]}if(c.message==undefined){c.message=""}dwr.engine._handleError(dwr.engine._receivedBatch,c);if(b){dwr.engine._receivedBatch=null;dwr.engine._clearUp(dwr.engine._batches[a])}};dwr.engine._remotePollCometDisabled=function(c,a){dwr.engine.setActiveReverseAjax(false);var b=(dwr.engine._receivedBatch==null&&a!=null);if(b){dwr.engine._receivedBatch=dwr.engine._batches[a]}if(c.message==undefined){c.message=""}dwr.engine._handleError(dwr.engine._receivedBatch,c);if(b){dwr.engine._receivedBatch=null;dwr.engine._clearUp(dwr.engine._batches[a])}};dwr.engine._remoteBeginIFrameResponse=function(b,a){if(b!=null){dwr.engine._receivedBatch=b.batch}dwr.engine._callPostHooks(dwr.engine._receivedBatch)};dwr.engine._remoteEndIFrameResponse=function(a){dwr.engine._clearUp(dwr.engine._receivedBatch);dwr.engine._receivedBatch=null};dwr.engine._eval=function(script){if(script==null){return null}if(script==""){dwr.engine._debug("Warning: blank script",true);return null}return eval(script)};dwr.engine._abortRequest=function(a){if(a&&!a.completed){dwr.engine._clearUp(a);if(a.req){a.req.abort()}dwr.engine._handleError(a,{name:"dwr.engine.timeout",message:"Timeout"})}};dwr.engine._callPostHooks=function(a){if(a.postHooks){for(var b=0;b<a.postHooks.length;b++){a.postHooks[b]()}a.postHooks=null}};dwr.engine._clearUp=function(b){if(!b){dwr.engine._debug("Warning: null batch in dwr.engine._clearUp()",true);return}if(b.completed){dwr.engine._debug("Warning: Double complete",true);return}if(b.div){b.div.parentNode.removeChild(b.div)}if(b.iframe){for(var c=0;c<dwr.engine._outstandingIFrames.length;c++){if(dwr.engine._outstandingIFrames[c]==b.iframe){dwr.engine._outstandingIFrames.splice(c,1)}}b.iframe.parentNode.removeChild(b.iframe)}if(b.form){b.form.parentNode.removeChild(b.form)}if(b.req){if(b.req==dwr.engine._pollReq){dwr.engine._pollReq=null}delete b.req}if(b.timeoutId){clearTimeout(b.timeoutId);delete b.timeoutId}if(b.map&&(b.map.batchId||b.map.batchId==0)){delete dwr.engine._batches[b.map.batchId];dwr.engine._batchesLength--}b.completed=true;if(dwr.engine._batchQueue.length!=0){var a=dwr.engine._batchQueue.shift();dwr.engine._sendData(a)}};dwr.engine._unloader=function(){dwr.engine._unloading=true;dwr.engine._batchQueue.length=0;for(var a in dwr.engine._batches){var b=dwr.engine._batches[a];if(b&&b.map){if(b.req){b.req.abort()}dwr.engine._clearUp(b)}}};if(window.addEventListener){window.addEventListener("unload",dwr.engine._unloader,false)}else{if(window.attachEvent){window.attachEvent("onunload",dwr.engine._unloader)}}dwr.engine._handleError=function(a,b){if(typeof b=="string"){b={name:"unknown",message:b}}if(b.message==null){b.message=""}if(b.name==null){b.name="unknown"}if(a&&typeof a.errorHandler=="function"){a.errorHandler(b.message,b)}else{if(dwr.engine._errorHandler){dwr.engine._errorHandler(b.message,b)}}if(a){dwr.engine._clearUp(a)}};dwr.engine._handleWarning=function(a,b){if(typeof b=="string"){b={name:"unknown",message:b}}if(b.message==null){b.message=""}if(b.name==null){b.name="unknown"}if(a&&typeof a.warningHandler=="function"){a.warningHandler(b.message,b)}else{if(dwr.engine._warningHandler){dwr.engine._warningHandler(b.message,b)}}if(a){dwr.engine._clearUp(a)}};dwr.engine._serializeAll=function(b,d,c,a){if(c==null){b.map[a]="null:null";return}switch(typeof c){case"boolean":b.map[a]="boolean:"+c;break;case"number":b.map[a]="number:"+c;break;case"string":b.map[a]="string:"+encodeURIComponent(c);break;case"object":if(c instanceof String){b.map[a]="String:"+encodeURIComponent(c)}else{if(c instanceof Boolean){b.map[a]="Boolean:"+c}else{if(c instanceof Number){b.map[a]="Number:"+c}else{if(c instanceof Date){b.map[a]="Date:"+c.getTime()}else{if(c&&c.join){b.map[a]=dwr.engine._serializeArray(b,d,c,a)}else{b.map[a]=dwr.engine._serializeObject(b,d,c,a)}}}}}break;case"function":break;default:dwr.engine._handleWarning(null,{name:"dwr.engine.unexpectedType",message:"Unexpected type: "+typeof c+", attempting default converter."});b.map[a]="default:"+c;break}};dwr.engine._lookup=function(e,c,a){var d;for(var b=0;b<e.length;b++){if(e[b].data==c){d=e[b];break}}if(d){return"reference:"+d.name}e.push({data:c,name:a});return null};dwr.engine._serializeObject=function(c,h,g,b){var f=dwr.engine._lookup(h,g,b);if(f){return f}if(g.nodeName&&g.nodeType){return dwr.engine._serializeXml(c,h,g,b)}var e="Object_"+dwr.engine._getObjectClassName(g)+":{";var d;for(d in g){if(typeof g[d]!="function"){c.paramCount++;var a="c"+dwr.engine._batch.map.callCount+"-e"+c.paramCount;dwr.engine._serializeAll(c,h,g[d],a);e+=encodeURIComponent(d)+":reference:"+a+", "}}if(e.substring(e.length-2)==", "){e=e.substring(0,e.length-2)}e+="}";return e};dwr.engine._errorClasses={Error:Error,EvalError:EvalError,RangeError:RangeError,ReferenceError:ReferenceError,SyntaxError:SyntaxError,TypeError:TypeError,URIError:URIError};dwr.engine._getObjectClassName=function(c){if(c&&c.constructor&&c.constructor.toString){var d=c.constructor.toString();var a=d.match(/function\s+(\w+)/);if(a&&a.length==2){return a[1]}}if(c&&c.constructor){for(var b in dwr.engine._errorClasses){if(c.constructor==dwr.engine._errorClasses[b]){return b}}}if(c){var d=Object.prototype.toString.call(c);var a=d.match(/\[object\s+(\w+)/);if(a&&a.length==2){return a[1]}}return"Object"};dwr.engine._serializeXml=function(c,f,e,b){var d=dwr.engine._lookup(f,e,b);if(d){return d}var a;if(window.XMLSerializer){a=new XMLSerializer().serializeToString(e)}else{if(e.toXml){a=e.toXml}else{a=e.innerHTML}}return"XML:"+encodeURIComponent(a)};dwr.engine._serializeArray=function(h,c,f,a){var d=dwr.engine._lookup(c,f,a);if(d){return d}if(document.all&&!window.opera){var b=["Array:["];for(var g=0;g<f.length;g++){if(g!=0){b.push(",")}h.paramCount++;var j="c"+dwr.engine._batch.map.callCount+"-e"+h.paramCount;dwr.engine._serializeAll(h,c,f[g],j);b.push("reference:");b.push(j)}b.push("]");e=b.join("")}else{var e="Array:[";for(var g=0;g<f.length;g++){if(g!=0){e+=","}h.paramCount++;var j="c"+dwr.engine._batch.map.callCount+"-e"+h.paramCount;dwr.engine._serializeAll(h,c,f[g],j);e+="reference:";e+=j}e+="]"}return e};dwr.engine._unserializeDocument=function(a){var c;if(window.DOMParser){var e=new DOMParser();c=e.parseFromString(a,"text/xml");if(!c.documentElement||c.documentElement.tagName=="parsererror"){var b=c.documentElement.firstChild.data;b+="\n"+c.documentElement.firstChild.nextSibling.firstChild.data;throw b}return c}else{if(window.ActiveXObject){c=dwr.engine._newActiveXObject(dwr.engine._DOMDocument);c.loadXML(a);return c}else{var d=document.createElement("div");d.innerHTML=a;return d}}};dwr.engine._newActiveXObject=function(a){var d;for(var c=0;c<a.length;c++){try{d=new ActiveXObject(a[c]);break}catch(b){}}return d};dwr.engine._debug=function(f,d){var a=false;try{if(window.console){if(d&&window.console.trace){window.console.trace()}window.console.log(f);a=true}else{if(window.opera&&window.opera.postError){window.opera.postError(f);a=true}}}catch(c){}if(!a){var b=document.getElementById("dwr-debug");if(b){var e=f+"<br/>"+b.innerHTML;if(e.length>2048){e=e.substring(0,2048)}b.innerHTML=e}}};
;
var soy=soy||{};(function(){var b=navigator.userAgent;var a=b.indexOf("Opera")==0;soy.IS_OPERA_=a;soy.IS_IE_=!a&&b.indexOf("MSIE")!=-1;soy.IS_WEBKIT_=!a&&b.indexOf("WebKit")!=-1})();soy.StringBuilder=function(a,b){this.buffer_=soy.IS_IE_?[]:"";if(a!=null){this.append.apply(this,arguments)}};soy.StringBuilder.prototype.bufferLength_=0;soy.StringBuilder.prototype.append=function(b,a,d){if(soy.IS_IE_){if(a==null){this.buffer_[this.bufferLength_++]=b}else{this.buffer_.push.apply(this.buffer_,arguments);this.bufferLength_=this.buffer_.length}}else{this.buffer_+=b;if(a!=null){for(var c=1;c<arguments.length;c++){this.buffer_+=arguments[c]}}}return this};soy.StringBuilder.prototype.clear=function(){if(soy.IS_IE_){this.buffer_.length=0;this.bufferLength_=0}else{this.buffer_=""}};soy.StringBuilder.prototype.toString=function(){if(soy.IS_IE_){var a=this.buffer_.join("");this.clear();if(a){this.append(a)}return a}else{return(this.buffer_)}};soy.renderElement=function(b,c,a){b.innerHTML=c(a)};soy.renderAsFragment=function(d,a){var c=document.createElement("div");c.innerHTML=d(a);if(c.childNodes.length==1){return c.firstChild}else{var b=document.createDocumentFragment();while(c.firstChild){b.appendChild(c.firstChild)}return b}};soy.$$augmentData=function(e,a){function d(){}d.prototype=e;var c=new d();for(var b in a){c[b]=a[b]}return c};soy.$$escapeHtml=function(a){a=String(a);if(!soy.$$EscapeHtmlRe_.ALL_SPECIAL_CHARS.test(a)){return a}if(a.indexOf("&")!=-1){a=a.replace(soy.$$EscapeHtmlRe_.AMP,"&amp;")}if(a.indexOf("<")!=-1){a=a.replace(soy.$$EscapeHtmlRe_.LT,"&lt;")}if(a.indexOf(">")!=-1){a=a.replace(soy.$$EscapeHtmlRe_.GT,"&gt;")}if(a.indexOf('"')!=-1){a=a.replace(soy.$$EscapeHtmlRe_.QUOT,"&quot;")}return a};soy.$$EscapeHtmlRe_={ALL_SPECIAL_CHARS:/[&<>\"]/,AMP:/&/g,LT:/</g,GT:/>/g,QUOT:/\"/g};soy.$$escapeJs=function(b){b=String(b);var c=[];for(var a=0;a<b.length;a++){c[a]=soy.$$escapeChar(b.charAt(a))}return c.join("")};soy.$$escapeChar=function(d){if(d in soy.$$escapeCharJs_){return soy.$$escapeCharJs_[d]}var b=d;var a=d.charCodeAt(0);if(a>31&&a<127){b=d}else{if(a<256){b="\\x";if(a<16||a>256){b+="0"}}else{b="\\u";if(a<4096){b+="0"}}b+=a.toString(16).toUpperCase()}return soy.$$escapeCharJs_[d]=b};soy.$$escapeCharJs_={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\x0B",'"':'\\"',"'":"\\'","\\":"\\\\"};soy.$$escapeUri=function(a){a=String(a);if(!soy.$$ENCODE_URI_REGEXP_.test(a)){return encodeURIComponent(a)}else{return a}};soy.$$ENCODE_URI_REGEXP_=/^[a-zA-Z0-9\-_.!~*'()]*$/;soy.$$insertWordBreaks=function(j,a){j=String(j);var f=[];var h=0;var b=false;var k=false;var g=0;var d=0;for(var e=0,c=j.length;e<c;++e){var l=j.charCodeAt(e);if(g>=a&&l!=soy.$$CharCode_.SPACE){f[h++]=j.substring(d,e);d=e;f[h++]=soy.WORD_BREAK_;g=0}if(b){if(l==soy.$$CharCode_.GREATER_THAN){b=false}}else{if(k){switch(l){case soy.$$CharCode_.SEMI_COLON:k=false;++g;break;case soy.$$CharCode_.LESS_THAN:k=false;b=true;break;case soy.$$CharCode_.SPACE:k=false;g=0;break}}else{switch(l){case soy.$$CharCode_.LESS_THAN:b=true;break;case soy.$$CharCode_.AMPERSAND:k=true;break;case soy.$$CharCode_.SPACE:g=0;break;default:++g;break}}}}f[h++]=j.substring(d);return f.join("")};soy.$$CharCode_={SPACE:32,AMPERSAND:38,SEMI_COLON:59,LESS_THAN:60,GREATER_THAN:62};soy.WORD_BREAK_=soy.IS_WEBKIT_?"<wbr></wbr>":soy.IS_OPERA_?"&shy;":"<wbr>";soy.$$changeNewlineToBr=function(a){a=String(a);if(!soy.$$CHANGE_NEWLINE_TO_BR_RE_.test(a)){return a}return a.replace(/(\r\n|\r|\n)/g,"<br>")};soy.$$CHANGE_NEWLINE_TO_BR_RE_=/[\r\n]/;soy.$$bidiTextDir=function(b,a){b=soy.$$bidiStripHtmlIfNecessary_(b,a);if(!b){return 0}return soy.$$bidiDetectRtlDirectionality_(b)?-1:1};soy.$$bidiDirAttr=function(c,d,a){var b=soy.$$bidiTextDir(d,a);if(b!=c){return b<0?"dir=rtl":b>0?"dir=ltr":""}return""};soy.$$bidiMarkAfter=function(c,d,a){var b=soy.$$bidiTextDir(d,a);return soy.$$bidiMarkAfterKnownDir(c,b,d,a)};soy.$$bidiMarkAfterKnownDir=function(c,b,d,a){return(c>0&&(b<0||soy.$$bidiIsRtlExitText_(d,a))?"\u200E":c<0&&(b>0||soy.$$bidiIsLtrExitText_(d,a))?"\u200F":"")};soy.$$bidiStripHtmlIfNecessary_=function(b,a){return a?b.replace(soy.$$BIDI_HTML_SKIP_RE_," "):b};soy.$$BIDI_HTML_SKIP_RE_=/<[^>]*>|&[^;]+;/g;soy.$$bidiSpanWrap=function(a,d){d=String(d);var c=soy.$$bidiTextDir(d,true);var b=soy.$$bidiMarkAfterKnownDir(a,c,d,true);if(c>0&&a<=0){d="<span dir=ltr>"+d+"</span>"}else{if(c<0&&a>=0){d="<span dir=rtl>"+d+"</span>"}}return d+b};soy.$$bidiUnicodeWrap=function(a,d){d=String(d);var c=soy.$$bidiTextDir(d,true);var b=soy.$$bidiMarkAfterKnownDir(a,c,d,true);if(c>0&&a<=0){d="\u202A"+d+"\u202C"}else{if(c<0&&a>=0){d="\u202B"+d+"\u202C"}}return d+b};soy.$$bidiLtrChars_="A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02B8\u0300-\u0590\u0800-\u1FFF\u2C00-\uFB1C\uFDFE-\uFE6F\uFEFD-\uFFFF";soy.$$bidiNeutralChars_="\u0000-\u0020!-@[-`{-\u00BF\u00D7\u00F7\u02B9-\u02FF\u2000-\u2BFF";soy.$$bidiRtlChars_="\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC";soy.$$bidiRtlDirCheckRe_=new RegExp("^[^"+soy.$$bidiLtrChars_+"]*["+soy.$$bidiRtlChars_+"]");soy.$$bidiNeutralDirCheckRe_=new RegExp("^["+soy.$$bidiNeutralChars_+"]*$|^http://");soy.$$bidiIsRtlText_=function(a){return soy.$$bidiRtlDirCheckRe_.test(a)};soy.$$bidiIsNeutralText_=function(a){return soy.$$bidiNeutralDirCheckRe_.test(a)};soy.$$bidiRtlDetectionThreshold_=0.4;soy.$$bidiRtlWordRatio_=function(e){var b=0;var a=0;var d=e.split(" ");for(var c=0;c<d.length;c++){if(soy.$$bidiIsRtlText_(d[c])){b++;a++}else{if(!soy.$$bidiIsNeutralText_(d[c])){a++}}}return a==0?0:b/a};soy.$$bidiDetectRtlDirectionality_=function(a){return soy.$$bidiRtlWordRatio_(a)>soy.$$bidiRtlDetectionThreshold_};soy.$$bidiLtrExitDirCheckRe_=new RegExp("["+soy.$$bidiLtrChars_+"][^"+soy.$$bidiRtlChars_+"]*$");soy.$$bidiRtlExitDirCheckRe_=new RegExp("["+soy.$$bidiRtlChars_+"][^"+soy.$$bidiLtrChars_+"]*$");soy.$$bidiIsLtrExitText_=function(b,a){b=soy.$$bidiStripHtmlIfNecessary_(b,a);return soy.$$bidiLtrExitDirCheckRe_.test(b)};soy.$$bidiIsRtlExitText_=function(b,a){b=soy.$$bidiStripHtmlIfNecessary_(b,a);return soy.$$bidiRtlExitDirCheckRe_.test(b)};
;

// Provide a default path to dwr.engine
if (dwr == null) var dwr = {};
if (dwr.engine == null) dwr.engine = {};
if (DWREngine == null) var DWREngine = dwr.engine;

if (Draft == null) var Draft = {};
Draft._path = '/dwr';
Draft.keepAlive = function(callback) {
  dwr.engine._execute(Draft._path, 'Draft', 'keepAlive', false, callback);
}
Draft.setAuthenticationProvider = function(p0, callback) {
  dwr.engine._execute(Draft._path, 'Draft', 'setAuthenticationProvider', p0, callback);
}
Draft.getDraft = function(p0, p1, p2, callback) {
  dwr.engine._execute(Draft._path, 'Draft', 'getDraft', p0, p1, p2, false, callback);
}
Draft.deleteDraft = function(p0, p1, p2, p3, callback) {
  dwr.engine._execute(Draft._path, 'Draft', 'deleteDraft', p0, p1, p2, p3, false, callback);
}
Draft.saveDraft = function(p0, callback) {
  dwr.engine._execute(Draft._path, 'Draft', 'saveDraft', p0, false, callback);
}

;

// Provide a default path to dwr.engine
if (dwr == null) var dwr = {};
if (dwr.engine == null) dwr.engine = {};
if (DWREngine == null) var DWREngine = dwr.engine;

if (MessageCreate == null) var MessageCreate = {};
MessageCreate._path = '/dwr';
MessageCreate.updateImagesFromDraft = function(p0, callback) {
  dwr.engine._execute(MessageCreate._path, 'MessageCreate', 'updateImagesFromDraft', p0, callback);
}

;

// Provide a default path to dwr.engine
if (dwr == null) var dwr = {};
if (dwr.engine == null) dwr.engine = {};
if (DWREngine == null) var DWREngine = dwr.engine;

if (ToggleFeatured == null) var ToggleFeatured = {};
ToggleFeatured._path = '/dwr';
ToggleFeatured.toggleFeatured = function(p0, p1, p2, p3, callback) {
  dwr.engine._execute(ToggleFeatured._path, 'ToggleFeatured', 'toggleFeatured', p0, p1, p2, p3, callback);
}

;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.StatusInput=="undefined"){jive.StatusInput={}}if(typeof jive.StatusInput.soy=="undefined"){jive.StatusInput.soy={}}jive.StatusInput.soy.ddSearch=function(a,c){var b=c||new soy.StringBuilder();b.append('<div class="j-autocomplete j-popover j-js-autocomplete"><div class="j-top-pointer"></div>');jive.StatusInput.soy.ddOutputEntries(a,b);b.append('<p class="j-search-hint">',soy.$$escapeHtml(a.i18n.ddSearchHint),"</p></div>");if(!c){return b.toString()}};jive.StatusInput.soy.ddTags=function(a,c){var b=c||new soy.StringBuilder();b.append('<div class="j-autocomplete j-popover j-js-autocomplete"><div class="j-top-pointer"></div>');if(a.currentTagText){jive.StatusInput.soy.ddOutputTags(soy.$$augmentData(a,{shouldCreateTag:soy.$$escapeHtml(a.shouldCreateTag),creationHTML:(a.allowTagCreation)?'<a class="jive-js-status-input-selectable jive-js-status-input-create" href="javascript:void(0)" data-id="'+soy.$$escapeHtml(a.currentTagText)+'">'+soy.$$escapeHtml(a.i18n.ddTagsCreateTitle)+soy.$$escapeHtml(a.currentTagText)+"</a>":""}),b)}else{b.append('<p class="font-color-meta j-autocomplete-tag-prompt">',(a.allowTagCreation)?soy.$$escapeHtml(a.i18n.ddTagsTitle):soy.$$escapeHtml(a.i18n.ddTagsTitleNoCreate),"</p>")}b.append("</div>");if(!c){return b.toString()}};jive.StatusInput.soy.ddFriends=function(a,c){var b=c||new soy.StringBuilder();b.append('<div class="j-autocomplete j-popover j-js-autocomplete"><div class="j-top-pointer"></div><p class="font-color-meta">',soy.$$escapeHtml(a.i18n.ddTitle),'</p><ul class="j-autocomplete-nav clearfix"><li>',soy.$$escapeHtml(a.i18n.ddFriendsLinkText),'</li><li><a class="jive-js-status-input-selectable jive-js-history" href="javascript:void(0);">',soy.$$escapeHtml(a.i18n.ddHistoryLinkText),"</a></li></ul>");jive.StatusInput.soy.ddOutputEntries(soy.$$augmentData(a,{emptyEntriesStr:a.i18n.ddNofriendsLabel}),b);b.append("</div>");if(!c){return b.toString()}};jive.StatusInput.soy.ddHistory=function(a,c){var b=c||new soy.StringBuilder();b.append('<div class="j-autocomplete j-popover j-js-autocomplete"><div class="j-top-pointer"></div><p class="font-color-meta">',soy.$$escapeHtml(a.i18n.ddTitle),'</p><ul class="j-autocomplete-nav clearfix"><li><a class="jive-js-status-input-selectable jive-js-friends" href="javascript:void(0);">',soy.$$escapeHtml(a.i18n.ddFriendsLinkText),"</a></li><li>",soy.$$escapeHtml(a.i18n.ddHistoryLinkText),"</li></ul>");jive.StatusInput.soy.ddOutputEntries(soy.$$augmentData(a,{emptyEntriesStr:a.i18n.ddUserbarNoHistoryToView}),b);b.append("</div>");if(!c){return b.toString()}};jive.StatusInput.soy.ddOutputEntries=function(a,g){var d=g||new soy.StringBuilder();d.append('<ul class="j-autocomplete-results">');var c=a.entries;var e=c.length;if(e>0){for(var f=0;f<e;f++){var b=c[f];d.append("<li>",b.html,"</li>")}}else{d.append((a.emptyEntriesHTML)?"<li>"+a.emptyEntriesHTML+"</li>":soy.$$escapeHtml(a.emptyEntriesStr))}d.append("</ul>");if(!g){return d.toString()}};jive.StatusInput.soy.ddOutputTags=function(a,g){var b=g||new soy.StringBuilder();b.append('<ul class="j-autocomplete-results">',(a.shouldCreateTag=="true")?"<li>"+a.creationHTML+"</li>":"");var d=a.entries;var e=d.length;for(var f=0;f<e;f++){var c=d[f];b.append("<li>",c.html,"</li>")}b.append("</ul>");if(!g){return b.toString()}};
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.rte=="undefined"){jive.rte={}}if(typeof jive.rte.table=="undefined"){jive.rte.table={}}jive.rte.table.headerCellProperties=function(a,c){var b=c||new soy.StringBuilder();b.append("<div class='content ",soy.$$escapeHtml(a.section),"Header'><h3>rte.table.sample_header</h3><div class='formFields sampleContainer'><table align='center' class='sampleHeader' style='width:145px;margin-left:20px;'><tr><th>rte.table.header</th></tr></table></div><h3>rte.table.style</h3><div class='formFields'>rte.table.padding: <input value='' class='padding spin-button' maxlength='2'/> px<br>rte.table.background: <input value='' class='backgroundColor color'/><br></div><h3>rte.table.text</h3><div class='formFields'>rte.table.alignment:<a href='javascript:;' class='mceButton mceButtonEnabled mceButtonSelected mce_justifyleft' title='rte.table.align_left'><span class='mceIcon mce_justifyleft'></span></a><a href='javascript:;' class='mceButton mceButtonEnabled mce_justifycenter' title='rte.table.align_center'><span class='mceIcon mce_justifycenter'></span></a><a href='javascript:;' class='mceButton mceButtonEnabled mce_justifyright' title='rte.table.align_right'><span class='mceIcon mce_justifyright'></span></a><a href='javascript:;' class='mceButton mceButtonEnabled mce_justifyfull' title='rte.table.align_full'><span class='mceIcon mce_justifyfull'></span></a><br>rte.table.font_family: <a href='javascript:;' class='family'/></a><br>rte.table.color: <input value='' class='fontColor color'/><br></div></div>");if(!c){return b.toString()}};jive.rte.table.cellProperties=function(a,c){var b=c||new soy.StringBuilder();b.append("<div class='content ",soy.$$escapeHtml(a.section),"Cell'><h3>rte.table.sample_cell</h3><div class='formFields sampleContainer'><table align='center' class='sampleHeader' style='width:145px;margin-left:20px;'><tr><th>rte.table.cell</th></tr></table></div><h3>rte.table.style</h3><div class='formFields'>rte.table.padding: <input value='' class='padding spin-button' maxlength='2'/> px<br>rte.table.background: <input value='' class='backgroundColor color'/><br></div><h3>rte.table.text</h3><div class='formFields'>rte.table.alignment:<a href='javascript:;' class='mceButton mceButtonEnabled mceButtonSelected mce_justifyleft' title='rte.table.align_left'><span class='mceIcon mce_justifyleft'></span></a><a href='javascript:;' class='mceButton mceButtonEnabled mce_justifycenter' title='rte.table.align_center'><span class='mceIcon mce_justifycenter'></span></a><a href='javascript:;' class='mceButton mceButtonEnabled mce_justifyright' title='rte.table.align_right'><span class='mceIcon mce_justifyright'></span></a><a href='javascript:;' class='mceButton mceButtonEnabled mce_justifyfull' title='rte.table.align_full'><span class='mceIcon mce_justifyfull'></span></a><br>rte.table.font_family: <a href='javascript:;' class='family'/></a><br>rte.table.color: <input value='' class='fontColor color'/><br></div></div>");if(!c){return b.toString()}};jive.rte.table.tableProperties=function(a,c){var b=c||new soy.StringBuilder();b.append("<div class='content tableStyle'><h3>rte.table.headers</h3><div class='formFields'><a href='javascript:;' class='th th-t'></a><a href='javascript:;' class='th th-tb'></a><a href='javascript:;' class='th th-tl'></a><a href='javascript:;' class='th th-n'></a></div><h3>rte.table.border</h3><div class='formFields'>rte.table.width: <input value='' class='borderWidth spin-button' maxlength='2'/> px<br>rte.table.color: <input value='' class='borderColor color'/><br></div><h3>rte.table.size_and_position</h3><div class='formFields'>rte.table.width: <input value='' class='widthPx spin-button' maxlength='4'/> <input value='' class='widthPer spin-button' maxlength='3'/> <input type='radio' name='width' class='radio chooseWidthPx'/> px <input type='radio' name='width' class='radio chooseWidthPer'/> %<br>rte.table.height: <input type='radio' name='height' class='radio chooseHeightAuto'/> rte.table.auto<br/><input type='radio' name='height' class='radio chooseHeightPx'/> <input value='' class='heightPx spin-button' maxlength='4'/> px<br>rte.table.alignment:<a href='javascript:;' class='mceButton mceButtonEnabled mce_justifytablenone' title='rte.table.align_none'><span class='mceIcon mce_justifytablenone'></span></a><a href='javascript:;' class='mceButton mceButtonEnabled mce_justifytableleft' title='rte.table.align_left'><span class='mceIcon mce_justifytableleft'></span></a><a href='javascript:;' class='mceButton mceButtonEnabled mce_justifytableright' title='rte.table.align_right'><span class='mceIcon mce_justifytableright'></span></a></div></div>");if(!c){return b.toString()}};jive.rte.table.columnProperties=function(a,c){var b=c||new soy.StringBuilder();b.append("<div class='content columnStyle'><h3>rte.table.headers</h3><div class='formFields'><a href='javascript:;' class='th th-t'></a><a href='javascript:;' class='th th-tb'></a><a href='javascript:;' class='th th-tl'></a><a href='javascript:;' class='th th-n'></a></div><h3>rte.table.size_and_position</h3><div class='formFields'>rte.table.width: <input type='radio' name='width' class='radio chooseWidthAuto'/> rte.table.auto<br/><input type='radio' name='width' class='radio chooseWidthPx'/> <input value='' class='widthPx spin-button' maxlength='4'/> px<br/><input type='radio' name='width' class='radio chooseWidthPer'/> <input value='' class='widthPer spin-button' maxlength='3'/> %<br></div></div>");if(!c){return b.toString()}};jive.rte.table.rowProperties=function(a,c){var b=c||new soy.StringBuilder();b.append("<div class='content rowStyle'><h3>rte.table.headers</h3><div class='formFields'><a href='javascript:;' class='th th-a'></a><a href='javascript:;' class='th th-l'></a><a href='javascript:;' class='th th-n'></a></div><h3>rte.table.size_and_position</h3><div class='formFields'>rte.table.height: <input type='radio' name='width' class='radio chooseHeightAuto'/> rte.table.auto<br/><input type='radio' name='width' class='radio chooseHeightPx'/> <input value='' class='heightPx spin-button' maxlength='4'/> px<br/></div></div>");if(!c){return b.toString()}};jive.rte.table.allTableProperties=function(a,c){var b=c||new soy.StringBuilder();b.append("<div class='properties'><form action='javascript:;' onsubmit='return false'><nav class='j-tab-nav'><ul class='tabs j-tabbar'><li class='j-tab-selected'><a href='javascript:;'>rte.table.style</a></li><li><a href='javascript:;'>rte.table.header</a></li><li><a href='javascript:;'>rte.table.cell</a></li></ul></nav>");jive.rte.table.tableProperties(null,b);jive.rte.table.headerCellProperties({section:"table"},b);jive.rte.table.cellProperties({section:"table"},b);b.append("</form></div>");if(!c){return b.toString()}};jive.rte.table.allColumnProperties=function(a,c){var b=c||new soy.StringBuilder();b.append("<div class='properties'><form action='javascript:;' onsubmit='return false'><nav class='j-tab-nav'><ul class='tabs j-tabbar'><li class='j-tab-selected'><a href='javascript:;'>rte.table.style</a></li><li><a href='javascript:;'>rte.table.header</a></li><li><a href='javascript:;'>rte.table.cell</a></li></ul></nav>");jive.rte.table.columnProperties(null,b);jive.rte.table.headerCellProperties({section:"column"},b);jive.rte.table.cellProperties({section:"column"},b);b.append("</form></div>");if(!c){return b.toString()}};jive.rte.table.allRowProperties=function(a,c){var b=c||new soy.StringBuilder();b.append("<div class='properties'><form action='javascript:;' onsubmit='return false'><nav class='j-tab-nav'><ul class='tabs j-tabbar'><li class='j-tab-selected'><a href='javascript:;'>rte.table.style</a></li><li><a href='javascript:;'>rte.table.header</a></li><li><a href='javascript:;'>rte.table.cell</a></li></ul></nav>");jive.rte.table.rowProperties(null,b);jive.rte.table.headerCellProperties({section:"row"},b);jive.rte.table.cellProperties({section:"row"},b);b.append("</form></div>");if(!c){return b.toString()}};jive.rte.table.allCellProperties=function(a,c){var b=c||new soy.StringBuilder();b.append("<div class='properties'><form action='javascript:;' onsubmit='return false'><div class='content'><input type='radio' name='style' class='radio chooseHeader'/> rte.table.header<input type='radio' name='style' class='radio chooseCell'/> rte.table.cell</div>");jive.rte.table.headerCellProperties({section:"cell"},b);jive.rte.table.cellProperties({section:"cell"},b);b.append("</form></div>");if(!c){return b.toString()}};jive.rte.table.propertiesChooser=function(a,c){var b=c||new soy.StringBuilder();b.append("<div class='propertiesChooser'><h3>rte.table.edit: <span></span></h3><a class='button editTable' href='javascript:;'></a><a class='button editColumn' href='javascript:;'></a><a class='button editRow' href='javascript:;'></a><a class='button editCell' href='javascript:;'></a><a class='button deleteTable' href='javascript:;'></a></div>");if(!c){return b.toString()}};jive.rte.table.propertiesChooserTable=function(a,c){var b=c||new soy.StringBuilder();b.append("rte.table.table");if(!c){return b.toString()}};jive.rte.table.propertiesChooserRow=function(a,c){var b=c||new soy.StringBuilder();b.append("rte.table.row");if(!c){return b.toString()}};jive.rte.table.propertiesChooserColumn=function(a,c){var b=c||new soy.StringBuilder();b.append("rte.table.column");if(!c){return b.toString()}};jive.rte.table.propertiesChooserCell=function(a,c){var b=c||new soy.StringBuilder();b.append("rte.table.cell");if(!c){return b.toString()}};jive.rte.table.editText=function(a,c){var b=c||new soy.StringBuilder();b.append("rte.table.edit");if(!c){return b.toString()}};jive.rte.table.deleteText=function(a,c){var b=c||new soy.StringBuilder();b.append("rte.table.delete");if(!c){return b.toString()}};
;
jive.namespace("i18n");jive.i18n={sub:function(b,a){if(typeof a=="string"||typeof a=="undefined"){a=Array.prototype.slice.call(arguments,1)}return b.replace(/\{([^{}]+)\}/g,function(e,c){var d=c.match(/^\d+$/)?parseInt(c,10):c;if(typeof a[d]!="undefined"){return a[d]}else{return e}})},soy:function(e,b){var a={zero:0,one:1,two:2,three:3,four:4,five:5,six:6};var c=e.string,d={};Object.keys(e).filter(function(f){return f!="string"}).forEach(function(f){if(typeof a[f]!="undefined"&&typeof d[a[f]]=="undefined"){d[a[f]]=e[f]}d[f]=e[f]});b.append(jive.i18n.sub(c,d))}};
;
jive.action=(function(){var a=_jive_base_url+"/";return{url:function(b,c){var d="";Object.keys(c).forEach(function(e){d+=e+"="+c[e]+"&"});if(d.length>0){d="?"+d.slice(0,d.length-1)}return a+b+".jspa"+d}}})();
;
jive.namespace("CommentApp");jive.CommentApp.CommentSource=function(o){var a=o.resourceType,l=o.resourceID,c=o.listAction,k=o.location,d=o.commentMode,j=o.isPrintPreview,b=o.contentObject,n=jive.rest.url("/comments"),i=n+"/"+a+"/"+l;function g(p){if(typeof p=="function"){p={success:p}}return p}function f(r,q){q=g(q);var p;if(r.id){p=n+"/"+r.id}else{p=i}$j.ajax({type:"POST",url:p,dataType:"json",data:JSON.stringify({comment:r}),contentType:"application/json; charset=utf-8",success:function(s,v,u){try{r.id=s.comment.commentID||r.id;r.moderated=s.comment.moderated;if(typeof q.success=="function"){q.success.call(r,r)}}catch(t){q.error.call(r,null,u.status)}},error:function(t,w,v){if(typeof q.error=="function"){try{var s=$j.parseJSON(t.responseText);if(s&&s.error&&s.error.message){q.error.call(r,s.error.message,s.error.code)}}catch(u){q.error.call(r,null,t==null?null:t.status)}}}});return this}function m(q,p){p=g(p);$j.ajax({type:"GET",url:c,dataType:"html",data:$j.extend({location:k,mode:d,isPrintPreview:j},b,q),success:function(r){if(typeof p.success=="function"){p.success.call(null,r)}},error:function(r){if(typeof p.error=="function"){p.error.call(null,r)}}});return this}function e(q,p){p=g(p);$j.ajax({type:"POST",url:i+"/preview",dataType:"html",data:{commentBody:q.body},success:function(r){if(typeof p.success=="function"){p.success.call(null,r)}},error:function(r){if(typeof p.error=="function"){p.error.call(null,r)}}});return this}function h(q,p){p=g(p);$j.ajax({type:"DELETE",url:n+"/"+q.id,complete:function(r){if($j.httpSuccess(r)){if(typeof p.success=="function"){p.success.call(q)}}else{if(typeof p.error=="function"){p.error.call(q)}}}})}this.save=f;this.destroy=h;this.getAllAsHTML=m;this.getPreview=e};
;
jive.namespace("CommentApp");jive.CommentApp.Comment=$Class.extend({init:function(b){var a=this;Object.keys(b).forEach(function(c){a[c]=b[c]})}});
;
jive.namespace("CommentApp");jive.CommentApp.CommentListView=function(k,d){jive.observable(this);var b,c=this,j=d.i18n;function o(){if(b){c.options.rteOptions.autoSave.stop();b.remove();b=null;$j(".jive-comment-add-link").show()}}function q(A,x,z,w){o();var y=A===jive.CommentApp.EditFormView;if(y){m(z.getDOMElement(),false)}else{m(null,false)}$j(".jive-comment-add-link").hide();b=new A(x,w);b.addListener("post",function(C,B){c.emit("saveComment",C,B);c.emit("savedComment")}).addListener("cancel",function(){c.emit("cancelComment");o();m(null,true)}).addListener("remove",function(){if(y){z.hideCommentEdit()}})}function r(z,x){var w;if(!x){x=z;z=null;w=v()}else{w=g(z)}var y=$j(w).find(".jive-comment-post");return q(jive.CommentApp.FormView,y,z,$j.extend({i18n:j},x))}function e(y,w){var x=$j(y.getDOMElement());if(!x.is(".jive-comment-edit")){x=x.find(".jive-comment-edit:first")}return q(jive.CommentApp.EditFormView,x,y,w)}function a(){function w(B){return $j(B).closest(".jive-comment-actions").attr("data-comment-id")}function A(C){var B=$j(C).closest("li[id^=comment-]");return(new jive.CommentApp.CommentView(B,$j.extend({id:w(C)},d)))}function y(B){return $j(B).attr("commentusername")}function x(F,B,E,C){var D=$j(F);if(D.length==0){window._jive_gui_quote_text=""}else{var G=D.attr("data-isAnonymous").toLowerCase()=="true";B.setQuotedMsg(E,G,(C?D.parents("li:first"):null))}}var z=$j(k);z.find(".jive-comment-actions a:has(.commentEdit)").live("click",function(){m(null,true);c.emit("editComment");var E=$j(this).attr("data-parentID");var B=A(this),C=$j("#comment-"+E).find("a:has(.commentAdd):first"),D=y(C);x(C,B,D,true);B.showCommentEdit();e(B,$j.extend({id:w(this)},d));return false});z.find(".jive-comment-actions a:has(.commentDelete)").live("click",function(){c.emit("deleteComment",A(this),w(this));return false});z.find(".jive-comment-actions a:has(.commentAdd)").live("click",function(){c.emit("replyComment");var C=y(this),B=A(this);x(this,B,C);n(C);r(B,$j.extend({parentCommentID:w(this)},d));return false});$j(k).find(".jive-content-commentbar a:has(.jive-icon-comment-add), .jive-comment-add-link").click(function(){c.emit("createComment");window._jive_gui_quote_text="";n("");r(d);$j(".jive-create-comment p.jive-comment-meta").hide();return false})}function p(){var x=(window.location.hash.match(/^#([^\/].+)$/)||[])[1];var w=x?$j('a[name="'+x+'"], [id="'+x+'"]'):$j();if(w.length>0){$j.scrollTo(w,200,{offset:{top:-20,left:-200}})}}function i(w){$j(k).html(w);p();a();jive.bindLightboxMedia()}function h(x,w){if(w==401||w==403||w==4026||w==0){x=jive.i18n.sub(j.globalLoginRequired,'<a href="'+encodeURI(window.location).replace(/#.*$/,"")+'">',"</a>")}x=x||d.i18n.globalAjaxError;$j("#jive-comment-error").html(x).show()}function f(w){$j("#success-moderation-edit").html('<div><span class="jive-icon-med jive-icon-check"></span>'+w+"</div>").show();$j.scrollTo($j("#success-moderation-edit"),"slow",{offset:{top:-40,left:0}})}function t(w){}function m(w,x){w=w||$j(k).find(".jive-js-addReply");if(w.length==0){return}if(x){w.fadeOut("fast").remove();c.options.rteOptions.autoSave.stop()}else{w.fadeIn("fast");$j.scrollTo(w,"slow",{offset:{top:-40,left:0}});c.options.rteOptions.autoSave.start()}}function l(){var w=$j(k).find("ul.jive-comment:first");if(w.length===0){w=$j("<ul/>",{"class":"jive-comment jive-comment-threaded jive-comment-indent-0"});$j(k).find(".jive-comment-container").html(w)}return w}function u(w){l().append(w)}function v(){m(null,true);var w=$j(jive.CommentApp.soy.renderReply({i18n:d.i18n}));u(w);return w}function g(z){m(null,true);var x=$j(jive.CommentApp.soy.renderReply({commentID:z.getCommentID(),username:z.username(),i18n:d.i18n}));z.append(x);if(d.isThreaded){var y=z.indent(),w=parseInt(x.parent().css("margin-left"),10);x.css("margin-left",-y-w+"px")}return x}function s(){return $j(k).find(".baseCommentForm")}function n(w){if(!d.isThreaded){s().find(".replyToName").html(w)}}this.setContent=i;this.closeForm=o;this.displayError=h;this.displaySuccess=f;this.setPreviewButtonText=t;this.renderForm=q;this.options=d;$j(document).ready(function(){$j(k).delegate("#inline-comment-sort","change",function(){c.emit("sortChange",$j(this).val())})})};
;
jive.namespace("SharedViews");jive.SharedViews.RteView=$Class.extend({init:function(a,b){this._preferredMode=window.preferredMode||b.preferredMode||"advanced";this._container=$j(a);this._formActionContainer=(b.formActionContainer)?$j(b.formActionContainer):this._container;this._rteDisabledBrowser=b.rteDisabledBrowser;this._resourceID=b.resourceID;this._resourceType=b.resourceType;this._isAnonymous=b.isAnonymous;this._setImagePickerURLs(b);this._templateName=b.templateName||"rte-template";this._bodyContent=b.bodyContent;this._settingsID=b.settingsID||"mini";this._i18n=b.i18n;this._imagesEnabled=b.imagesEnabled;if(this._imagePickerUrl){window._jive_image_picker_url=this._imagePickerUrl}if(this._imagesEnabled!=null){window._jive_images_enabled=this._imagesEnabled}var c=this;$j(document).ready(function(){c._render();if(!c._rteDisabledBrowser){c._createRTE()}c._addListeners()})},remove:function(){if(!this._rteDisabledBrowser){if(this._rte){this._rte.destroy()}window.editor.clear("wysiwygtext");jive.rte.multiRTE=jive.rte.multiRTE.filter(function(a){return a!="wysiwygtext"})}this._container.find("form").remove();$j(window).unbind("unload",this._unloadCallback);this.emit("remove")},val:function(a){if(a){this._rte.setHTML(a);return this}else{return this._getContentBody()}},setPreviewButtonText:function(a){this._container.find("[name=preview]").val(a)},_setImagePickerURLs:function(a){this._imagePickerUrl=a.imagePickerUrl;this._destroyImagePickerUrl=a.destroyImagePickerUrl},focus:function(){this._rte.tinymceFocus()},_initEditor:function(){this._currentMode="advanced";var a=this;var b=new jive.rte.RTEListener();b.doneTogglingMode=function(){if(a._currentMode=="advanced"){a._currentMode="rawhtml"}else{a._currentMode="advanced"}a._refreshLinks();a.emit("toggle",a._currentMode)};this._rte.addListener(b);if(this._preferredMode=="rawhtml"){this._rte.toggleEditorMode("wysiwygtext")}else{if(tinymce.isIE){this._rte.toggleEditorMode();this._rte.toggleEditorMode()}}},_initRTE:function(){var a=this;if(this._rte.isTextOnly()){$j("#wysiwyg-panel").removeClass("loading");this._preferredMode="rawhtml";this._currentMode="rawhtml";return}this._initEditor();this._refreshLinks();setTimeout(function(){a.focus()},0);this.emit("ready")},_createRTE:function(){var a=this;this._rte=new jive.rte.RTE(jiveControl,"wysiwygtext",this._settingsID);window.editor.put("wysiwygtext",this._rte);jive.rte.multiRTE.push("wysiwygtext");var b=new jive.rte.RTEListener();b.initFinished=function(c){a._initRTE()};this._rte.addListener(b)},_getContentBody:function(){if(!this._rteDisabledBrowser){return this._rte.getHTML()}else{return this._container.find("textarea:visible").val()}},_getValues:function(){return{body:this._getContentBody()}},_postHandler:function(){this.emit("post",this._getValues());return false},_addListeners:function(){var a=this;this._formActionContainer.find("[name=post]").click(function(){return a._postHandler()}).end().find("[name=preview]").click(function(){a.emit("preview",a._getValues());return false}).end().find("[name=cancel]").click(function(){a.emit("cancel",a._getValues());a._unload();return false});this._container.find(".toggle_preferred_mode").click(function(){var b=a._currentMode;WikiTextConverter.setPreferredEditorMode(b,{callback:function(){a._preferredMode=b;window.preferredMode=b;a._refreshLinks()},timeout:DWRTimeout});return false}).end().find(".toggle_html").click(function(){a._rte.toggleEditorMode("wysiwygtext");return false});this._unloadCallback=this._unload.bind(this);$j(window).bind("unload",this._unloadCallback)},_unload:(function(){if(this._destroyImagePickerUrl){$j.ajax({url:this._destroyImagePickerUrl,type:"POST"})}}),_template:(function(){var b={};return function a(f,e){var c=/^[\w\-]+$/.test(f)?b[f]=b[f]||a(document.getElementById(f).innerHTML):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+f.replace(/[\r\t\n]/g," ").replace(/(^|%>)(.+?)(<%|$)/,function(g,h,i,j){return h+d(i)+j}).split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return e?c(e):c;function d(g){return g.replace("'","&apos;").replace("\\","\\\\")}}})(),_render:function(){this._container.append(this._template(this._templateName,{body:this._bodyContent}))},_refreshLinks:function(){this._container.find(".toggle_html").toggle(this._currentMode=="rawhtml");this._container.find(".toggle_preferred_mode").toggle(this._preferredMode!=this._currentMode)}});jive.SharedViews.RteView.setMiniRTEQuotedMsg=function(c,b,d,a){window._jive_gui_quote_text=jive.DiscussionApp.soy.rteMsgQuote({i18n:b,userName:c,isAnonymous:d,msgBody:a})};jive.observable(jive.SharedViews.RteView.prototype);
;
jive.namespace("shared");jive.shared.FormWaitingView=$Class.extend({init:function(a,b){this._$container=$j(a);this._i18n=b.i18n;if(b.containerPadding){this._containerPadding=b.containerPadding}else{this._containerPadding=this._$container.css("padding-left")==null?0:Number(this._$container.css("padding-left").replace("px",""))}this._buttonSelector=b.buttonSelector||"input[type=button], input[type=submit]";this._bgCssClass=b.bgCssClass||"jive-form-waiting-disable-bg"},disableForm:function(){if(this._$container.find(".jive-js-form-disable").length==0){var c={width:this._$container.innerWidth(),height:this._$container.innerHeight(),left:0,top:0};var d=$j(jive.Shared.soy.formWaitingOverlay({i18n:this._i18n,bgCssClass:this._bgCssClass}));for(var b in c){d.css(b,c[b]+"px")}d.prependTo(this._$container);var a=d.find(".jive-js-load-indicator");a.css("left",(c.width/2-a.width()/2)+"px");a.css("top",(c.height/2-a.height()/2)+"px");this._$container.find(this._buttonSelector).attr("disabled",true)}},enableForm:function(){this._$container.find(".jive-js-form-disable").remove();this._$container.find(this._buttonSelector).removeAttr("disabled")}});
;
jive.namespace("CommentApp");jive.CommentApp.FormView=$Class.extend({init:function(a,b){this._parentCommentID=b.parentCommentID;this._commentMode=b.commentMode;if(!this._postBlock){this._postBlock=$j("#jive-comment-post-block")}this._itemAuthorID="comment-author";this._itemBodyID="commentBody";this._itemEmailID="comment-email";this._itemURLID="comment-url";this._container=$j(a);this._initFormWaitingView(b.i18n);this.rteView=null;this._setImagePickerURLs(b);if(this._imagePickerUrl){window._jive_image_picker_url=this._imagePickerUrl}if(this._imagesEnabled!=null){window._jive_images_enabled=this._imagesEnabled}this.options=b;this._render()},getParentCommentID:function(){return this._parentCommentID},_initFormWaitingView:function(a){this._formWaitingView=new jive.shared.FormWaitingView(this._container.parents(".jive-js-addReply"),{i18n:a,containerPadding:0})},_setImagePickerURLs:function(a){this._imagePickerUrl=_jive_base_url+"/comment-image-picker.jspa?containerType="+a.containerType+"&container="+a.containerID+(a.id?"&comment="+a.id:"")+"&postedFromGUIEditor=true&contentObjectType="+a.resourceType+"&object="+a.resourceID;this._destroyImagePickerUrl=_jive_base_url+"/comment-image-picker!clean.jspa"},focus:function(){if(this._isAnonymous){$j("#"+this._itemAuthorID).focus()}else{this._super()}},_getValues:function(){return{body:this.rteView.getHTML(),mobileEditor:this.rteView.isMobileOnly(),name:$j("#"+this._itemAuthorID).val(),email:$j("#"+this._itemEmailID).val(),URL:$j("#"+this._itemURLID).val(),parentCommentID:this._parentCommentID,commentMode:this._commentMode}},_postHandler:function(){var a=this;a.emit("post",a._getValues(),function(){a._formWaitingView.enableForm()});a._formWaitingView.disableForm();return false},_render:function(){var a=this._postBlock.clone().removeAttr("id").show();this._container.append(a);var b=this;var c=$j.extend({$element:$j("#wysiwygtext"),isEditing:false,onReady:function(){b.rteView.focus();if(b.options.rteOptions.onReady){b.options.rteOptions.onReady()}}},this.options.rteOptions);this.rteView=new jive.rte.RTEWrap(c);this._container.find("form").find("[name=post]").click(function(){return b._postHandler()}).end().find("[name=cancel]").click(function(){b.emit("cancel",b._getValues());if(b._destroyImagePickerUrl){$j.ajax({url:this._destroyImagePickerUrl,type:"POST"})}return false})},remove:function(){if(this.rteView){this.rteView.killYourself();this.rteView.destroy()}window.editor.clear("wysiwygtext");jive.rte.multiRTE=jive.rte.multiRTE.filter(function(a){return a!="wysiwygtext"});this._container.find("form").remove();$j(window).unbind("unload",this._unloadCallback);this.emit("remove")}});jive.observable(jive.CommentApp.FormView.prototype);
;
jive.namespace("CommentApp");jive.CommentApp.EditFormView=jive.CommentApp.FormView.extend({init:function(a,b){this._id=b.id;this._postBlock=$j("#jive-comment-edit-block");this._super(a,b)},_initFormWaitingView:function(a){this._formWaitingView=new jive.shared.FormWaitingView($j(this._container).parents(".jive-comment-content"),{i18n:a,containerPadding:0})},_render:function(){var e=this._postBlock.clone().removeAttr("id").show();this._container.append(e);var b=this._container.find(".jive-comment-rte-source").val();var a=this._container.find("[name=commentGuestName]").val();var d=this._container.find("[name=commentGuestEmail]").val();var c=this._container.find("[name=commentGuestUrl]").val();if(a||d||c){this._container.find(".jive-comment-rte-source").val();this._container.find(".jive-comment-post-anonymous [name=name]").val(a);this._container.find(".jive-comment-post-anonymous [name=email]").val(d);this._container.find(".jive-comment-post-anonymous [name=url]").val(c);this._container.find(".jive-comment-post-anonymous").show()}else{this._container.find(".jive-comment-post-anonymous").hide()}$j("#wysiwygtext").val(b);var f=this;var g=$j.extend({$element:$j("#wysiwygtext"),isEditing:true,onReady:function(){f.rteView.focus();if(f.options.rteOptions.onReady){f.options.rteOptions.onReady()}}},this.options.rteOptions);this.rteView=new jive.rte.RTEWrap(g);this._container.find("form").find("[name=post]").click(function(){return f._postHandler()}).end().find("[name=cancel]").click(function(){f.emit("cancel",f._getValues());if(f._destroyImagePickerUrl){$j.ajax({url:this._destroyImagePickerUrl,type:"POST"})}return false})},_getValues:function(){return{body:this.rteView.getHTML(),mobileEditor:this.rteView.isMobileOnly(),name:this._container.find("[name=name]").val(),email:this._container.find("[name=email]").val(),URL:this._container.find("[name=url]").val(),id:this._id}}});
;
jive.namespace("CommentApp");jive.CommentApp.CommentView=function(l,q){jive.observable(this);var n=q.id,i=$j(l),e=q.isThreaded,p=q.i18n,h=this;function f(){i.fadeOut(function(){$j(this).remove()});this.emit("remove",n);return this}function o(r){i.find("[class*=comment-preview]").html(r).fadeIn()}function m(){return i}function c(s,t,u){if(!u){u=i}var r=u.find(".jive-rendered-content").html();jive.SharedViews.RteView.setMiniRTEQuotedMsg(s,p,t,r)}function j(){i.find(".jive-comment-meta:first, #comment-body-"+n+", #comment-action-div-"+n).hide();i.find(".jive-comment-meta:first").after('<p class="jive-js-edit-title jive-comment-meta font-color-meta-light">'+p.cmntEditingTitle+"</p>")}function k(){i.find(".jive-comment-meta:first, #comment-body-"+n+", #comment-action-div-"+n).show();i.find(".jive-js-edit-title").remove()}function g(){return n}function d(){return i.find(".jive-username-link:first").text()}function a(r){var s;if(e){s=i.find("ul.jive-comment:first");if(s.length===0){s=$j("<ul/>",{"class":"jive-comment jive-comment-threaded jive-comment-indent-1"});i.append(s)}s.append(r)}else{i.parent().append(r)}}function b(){var r=i.parents().andSelf().filter("ul.jive-comment").toArray();return r.slice(1).reduce(function(t,s){return t+parseInt($j(s).css("margin-left"),10)},0)}this.remove=f;this.displayPreview=o;this.getDOMElement=m;this.setQuotedMsg=c;this.getCommentID=g;this.username=d;this.showCommentEdit=j;this.hideCommentEdit=k;this.append=a;this.indent=b};
;
jive.namespace("CommentApp");jive.CommentApp.Main=function(o){var g=o.commentMode,e=o.sort||"datedesc",j=o.paginate||false,a=o.pagerType||(j&&jive.Pager.Main),l=o.pageSize||25,n=o.i18n,h,k,m,d;function i(){var q=$j("#"+m),p=new a(q,b,{per_page:l});return p}function f(p){if(j&&p){d.set_parameters(p)}else{if(j){d.update()}else{b(p)}}}function b(p,q){p=p||{};p.sort=p.sort||e;h.getAllAsHTML(p,function(r){k.setContent(r);if($j.isFunction(q)){q(r,"success")}})}function c(p){if(j&&p){d.load_page({comment:p})}else{if(p){f()}}}switch(g){case"inline":m="jive-inlinecomments";break;case"backchannel":m="jive-authordiscussion";break;default:m="jive-comments";break}h=new jive.CommentApp.CommentSource($j.extend({location:m},o));k=new jive.CommentApp.CommentListView("#"+m,o);k.addListener("sortChange",function(p){e=p;f({sort:p})}).addListener("saveComment",function(r,q){var s=new jive.CommentApp.Comment(r),p=this;h.save(s,{success:function(t){if(q){q()}p.closeForm();if(t.moderated){b(null,function(){p.displaySuccess(n.postSuccessText)})}else{window.location=window.location.toString().split("#")[0]+"#comment-"+t.id;c(t.id)}},error:function(u,t){p.displayError(u,t);if(q){q()}}})}).addListener("deleteComment",function(s,r){var q=confirm(n.confirmDeleteComment),t=new jive.CommentApp.Comment({id:r}),p=this;if(q){s.remove();h.destroy(t,function(){f()})}});$j(document).ready(function(){var p;if(j){d=i();p=(window.location.hash.match(/^#([^\/].+)$/)||[])[1];if(p){c(p);return}}f()});this.closeForms=function(){k.closeForm()};this.renderForm=function(p,r,q){k.renderForm(p,r,null,q)};this.addCommentListViewListener=function(p,q){k.addListener(p,q)};this.refresh=function(){f()}};
;
jive.namespace("DiscussionApp");jive.DiscussionApp.Discussion=jive.CommentApp.Comment.extend({getFieldProps:function(){var b={};for(var a in this){if(!$j.isFunction(this[a])){b[a]=this[a]}}return b}});
;
jive.namespace("DiscussionApp");jive.DiscussionApp.DiscussionSource=function(d){var m=d.resourceType,e=d.resourceID,a=d.resourceVersionID,k=d.listAction,p=d.i18n,l={name:"message.post."+e},f=jQuery,g=jive.action.url("post",{}),b=jive.action.url("post!reply",{}),o=jive.action.url("post!clean",{});function q(v){if(typeof v=="function"){v={success:v}}return f.extend({success:f.noop,error:f.noop},v)}function u(w){var v;if(window.innerShiv){v=f("<div/>").append(w.clone());return f(window.innerShiv(v.html()))}else{return w}}function n(v){return !v}function i(x,w){var v=x.find("#jive-error-box"),y=x.find("#post-error-body");if(x.find("#jive-postpage").length>0){if(v.length>0){return v.text()}else{if(f.trim(w.body).length===0){return y.html()}}}return""}function j(v){return v.find("#jive-moderated-message").length>0}function r(v){return v.find("#jive-thread-messages-container").length<1}function s(v){return r(v)?u(v.find("#jive-moderated-message")):u(v.find("#jive-thread-messages-container"))}function c(v){return v.find("#jive-login-formblock").length>0}function t(w,v){v=q(v);jive.util.securedPost(l.name).addCallback(function(x){f.ajax({type:"POST",url:g,data:f.extend({},w.getFieldProps(),x),dataType:"html",success:function(B){var y=f("<div/>").append(jive.util.withoutScripts(B)),A=i(y,w)||null,z=s(y);if(n(B)||A||z.length<1){v.error.call(w,B,A,c(y))}else{v.success.call(w,B,z,r(y),j(y))}},error:function(y){v.error.call(w,y)}})}).addErrback(function(y){var x=y&&(y.status==403||y.status==401);v.error.call(w,null,null,x)});return this}function h(){f.ajax({type:"GET",url:o})}this.save=t;this.cleanSession=h};
;
jive.namespace("DiscussionApp");jive.DiscussionApp.QuestionSource=function(f){var a=jive.rest.url("/discussions/"+f),b=a+"/question";function d(k){if(typeof k=="function"){k={success:k}}return k}function e(k){k=d(k);$j.ajax({type:"GET",url:b,dataType:"json",data:{},success:function(l){k.success(l.question)},error:function(l){if(typeof k.error=="function"){k.error.call(null,l)}}});return this}function g(k,l){l=d(l);$j.ajax({type:"POST",url:a+"/"+k+"/helpful",dataType:"json",data:{},success:function(m){l.success(m.question)},error:function(m){if(typeof l.error=="function"){l.error.call(null,m)}}})}function c(k){k=d(k);$j.ajax({type:"POST",url:a+"/assumedanswered",dataType:"json",data:{},success:function(l){k.success(l.question)},error:function(l){if(typeof k.error=="function"){k.error.call(null,l)}}})}function h(k,l){l=d(l);$j.ajax({type:"POST",url:a+"/"+k+"/correct",dataType:"json",data:{},success:function(m){l.success(m.question)},error:function(m){if(typeof l.error=="function"){l.error.call(null,m)}}})}function j(k,l){l=d(l);$j.ajax({type:"POST",url:a+"/"+k+"/unmark",dataType:"json",data:{},success:function(m){l.success(m.question)},error:function(m){if(typeof l.error=="function"){l.error.call(null,m)}}})}function i(k,l){l=d(l);$j.ajax({type:"POST",url:a+"/"+k+"/unmark",dataType:"json",data:{},success:function(m){l.success(m.question)},error:function(m){if(typeof l.error=="function"){l.error.call(null,m)}}})}this.getQuestion=e;this.markAsHelpful=g;this.markAsCorrect=h;this.markAssumedAnswered=c;this.unMarkAsHelpful=j;this.unMarkAsCorrect=i};
;
jive.namespace("DiscussionApp");jive.DiscussionApp.DiscussionView=function(h){jive.observable(this);var e=$j(h),c=this;function b(){e.fadeOut(function(){$j(this).remove()});c.emit("remove",c.messageID);return c}function d(i){e.find("[class*=discussion-preview]").html(i).fadeIn()}function f(){return e}function g(k,j,l){var i=e.find(".jive-rendered-content").html();jive.SharedViews.RteView.setMiniRTEQuotedMsg(k,j,l,i)}function a(){var i=e.parents().andSelf().filter("li.reply").toArray();return i.slice(1).reduce(function(k,j){var l=$j(j);return k+parseInt(l.css("margin-left"),10)+parseInt(l.css("padding-left"),10)},0)}this.remove=b;this.displayPreview=d;this.getDOMElement=f;this.setQuotedMsg=g;this.indent=a;(function(j){var i=e.find("a.discussionAdd");j.messageID=i.attr("data-messageID");j.username=i.attr("data-discussionusername");j.isReply=(i.attr("data-isReply")||"").toLowerCase()==="true";j.replySubject=i.attr("data-replySubject");j.isAnonymous=(i.attr("data-isAnonymous")||"").toLowerCase()==="true";j.advEditorLnk=i.attr("data-advEditorLnk")})(this)};
;
jive.namespace("DiscussionApp");jive.DiscussionApp.DiscussionListView=function(q,d){jive.observable(this);var j=this;var b,n,c=this,m=d.i18n,u=0,w;this._getValues=function(){var E={};b.find("[name=mobileEditor],[name=containerType],[name=container],[name=thread],[name=reply],[name=message],[name=postedFromGUIEditor],[name=subject],[name^=message.post],[name=inlinePost],[name=imageFile]").each(function(){var G=$j(this).attr("name");if((G in E)){var F=E[G];E[G]=[];if($j.isArray(F)){$j.each(F,function(H,I){E[G].push(I)})}else{E[G].push(F)}E[G].push($j(this).val())}else{E[G]=$j(this).val()}});var D=b.find("[name='ansQuestion']:checked");if(D.length>0){E.ansQuestion=D.val()}return $j.extend(E,{body:n.getHTML()})};function t(D,E){if(n){n.setHTML("");n.focus()}else{D.append($j("#rte-template").clone().show().removeAttr("id"));D.find("textarea").attr("id","wysiwygtext");D.find(".jive-warn-box").attr("id","autosave-prompt");if(!d.draftExists){$j("#autosave-prompt").remove()}var F=$j.extend({$element:$j("#wysiwygtext"),isEditing:false,onReady:function(){n.focus();if(d.rteOptions.onReady){d.rteOptions.onReady()}}},d.rteOptions);n=new jive.rte.RTEWrap(F);b=F.$element.parents("form");b.submit(function(){g();var G=$j.ajaxSettings.traditional;$j.ajaxSettings.traditional=true;j._formWaitingView.disableForm();c.emit("saveDiscussion",j._getValues(),function(){j._formWaitingView.enableForm();$j.ajaxSettings.traditional=G});return false});b.find(".jive-form-button-cancel").click(function(){r();d.rteOptions.autoSave.doDiscard();d.rteOptions.autoSave.stop();n.destroy();n=null});e(E)}b.find("[name=message]").val(E.parentDiscussionID);c.emit("formReady")}function e(D){j._advEditorLnk=D.advEditorLnk;A().click(function(){a();return false})}function A(){return w.parent().find(".advEditor")}function a(){var D=n.getHTML();if(D!=null&&D.length>0){D="&unsanitaryBody="+encodeURIComponent(D)}j._formWaitingView.disableForm();jive.util.createAndSubmitDynamicForm({url:j._advEditorLnk+D,method:"post"})}function x(D){r();D.setQuotedMsg(D.username,m,D.isAnonymous);var E=$j.extend({parentDiscussionID:D.messageID,advEditorLnk:D.advEditorLnk,replySubject:D.replySubject,userName:D.username},d);var F=o(D);return t(F,E)}function C(E){var D=$j(E).closest(".jive-thread-message, .jive-thread-post, #jive-thread-reply-footer");if(D.length>0){return new jive.DiscussionApp.DiscussionView(D)}else{return null}}function p(){$j(".jive-thread-reply-hidden").closest(".reply").css("background-position","left -55px")}function l(){w.find("a.discussionAdd").live("click",function(){var D=C(this);if(d.isModerated){c.displayModeratedMessage()}x(D);return false});p()}function i(D){w.find(".jive-js-addReply #post-error-table > #post-error-subject").html(D).show().parent().slideDown()}function v(){i(jive.i18n.sub(m.globalLoginRequired,'<a href="'+encodeURI(window.location).replace(/#.*$/,"")+'">',"</a>"))}function g(){w.find(".jive-js-addReply #post-error-table").slideUp().find("#post-error-subject").html("").hide()}function f(E,D){$j("#success-moderation-edit").html('<div><span class="jive-icon-med jive-icon-check"></span>'+E+"</div>").fadeIn("normal",function(){if(D){$j.scrollTo($j("#success-moderation-edit"),"slow",{offset:{top:-20,left:0}})}})}function k(){$j("#success-moderation-edit").hide()}function B(D){var F=!D.isReply?w.find("ul.jive-discussion-replies:first > li:last"):D.getDOMElement().closest("li.reply");var G=true;if(F.length===0&&!D.isReply){F=$j('<ul class="jive-discussion-replies jive-discussion-flat jive-discussion-indent-0"/>');w.append(F);G=false}var E;if(d.isThreaded&&D.isReply){E=F.find("ul.jive-discussion-replies:first > li:last");if(E.length==0){E=$j('<ul class="jive-discussion-replies jive-discussion-flat jive-discussion-indent-1"/>');F.append(E);return E}else{return E.parent()}}else{E=G?F.parent():F;return E}}function o(D){var F=w.find(".jive-js-addReply");if(F.length>0){F.remove()}F=$j(jive.DiscussionApp.soy.renderReply({userName:D.username,messageID:D.messageID,i18n:m}));B(D).append(F);var E=D.indent();$j(".addReply").css("margin-left",-E+"px");j._formWaitingView=new jive.shared.FormWaitingView(w.find(".jive-js-addReply"),{i18n:d.i18n,containerPadding:E,bgCssClass:"jive-form-waiting-disable-bg-discusssions"});F.fadeIn("fast");$j.scrollTo(F,"slow",{offset:{top:-40,left:0}});return F.find(".jive-discussion-post")}function r(){var D=w.find(".jive-js-addReply");var E=D.parent();D.fadeOut("fast",function(){if(E.children().length==0){E.hide()}})}function z(D){d.rteOptions.autoSave.doDiscard();d.rteOptions.autoSave.stop();n.destroy();n=null;w.html($j(D).children());p();jive.bindLightboxMedia()}function h(E){E=E||$j("<p>").html(d.i18n.postReplyMustBeApprvdText);r();var D=u<=0;f(E.html(),D);u+=1}function s(){$j(".localScroll").first().click()}function y(){return w.find("#discussionForm-baseDiscussionForm")}this.displayError=i;this.displayLoginError=v;this.displaySuccess=f;this.hideSuccess=k;this.scrollToLatestMsg=s;this.redisplayReplies=z;this.displayModeratedMessage=h;$j(document).ready(function(){w=$j(q);l()})};
;
jive.namespace("DiscussionApp");jive.DiscussionApp.QuestionView=function(l,f,j){jive.observable(this);var g=this;var k;var q={open:"open",resolved:"resolved",assumed_resolved:"assumed_resolved"};function a(s){h(s);r(s);n(s);if($j.browser.msie&&$j.browser.version<7){$j("#jive-thread-messages-container").hide().show()}}function o(s,u){var w=u.numHelpful;var t=u.totalNumHelpful;var x=t-w;r(u);if(x==0){n(u)}else{var v=s.closest(".jive-thread-reply");e(v,u)}$j(s).closest(".jive-thread-reply-btn").append(jive.discussions.soy.qHelpfulAnswerFadeOutText({question:u,i18n:j}));clearTimeout(k);k=setTimeout(function(){$j(".helpfulRemaining").fadeOut(200,function(){$j(this).remove()})},3000);return false}function b(s,u){var w=u.numHelpful;var t=u.totalNumHelpful;var x=t-w;if(x==1){n(u)}else{var v=$j(s.closest(".jive-thread-reply"));e(v,u)}r(u);return false}function n(s){$j(".jive-thread-reply-body").each(function(){e($j(this),s)})}function e(s,t){var v=$j(s).find("a:first").attr("name");var u=parseInt(v,10);i($j(s).find(".jive-thread-reply-message"),u,t);p(s,u,t)}function i(s,v,u){if(u.canManageQuestionState){var x=u.numHelpful;var t=u.totalNumHelpful;var y=t-x;var w=$j(s).find(".jive-thread-reply-btn");if(w.length==0){$j(s.append($j("<div>").addClass("jive-thread-reply-btn")));w=$j(s).find(".jive-thread-reply-btn")}w.empty();if(u.correctAnswer&&v==u.correctAnswer.ID){w.append(jive.discussions.soy.qUnmarkAsCorrect({question:u,i18n:j}));w.find(".jive-thread-reply-btn-correct-unmark").click(function(){f.unMarkAsCorrect(v,g.renderAll);return false})}else{if(u.helpfulAnswers&&(m(u.helpfulAnswers,v))){w.append(jive.discussions.soy.qUnmarkAsHelpful({question:u,i18n:j}));w.find(".jive-thread-reply-btn-helpful-unmark").click(function(){f.unMarkAsHelpful(v,g.unMarkAsHelpful.bind(g,$j(w)));return false})}else{if(u.questionState!="resolved"&&!(u.helpfulAnswers&&(m(u.helpfulAnswers,v)))){w.append(jive.discussions.soy.qMarkAsCorrect({question:u,i18n:j}));w.find(".jive-thread-reply-btn-correct").click(function(){f.markAsCorrect(v,g.renderAll);return false})}if(y>0){w.append(jive.discussions.soy.qMarkAsHelpful({question:u,i18n:j}));w.find(".jive-thread-reply-btn-helpful").click(function(){f.markAsHelpful(v,g.markAsHelpful.bind(g,$j(w)));return false})}}}}}function p(s,u,t){var v=$j(s).closest(".jive-thread-reply");if(t.correctAnswer&&u==t.correctAnswer.ID){if(!v.is(".jive-thread-reply-correct")){v.addClass("jive-thread-reply-correct");$j(s).find(".jive-thread-reply-subject").find("strong:first").find("a:first").prepend(jive.discussions.soy.qCorrectAnswer({question:t,i18n:j}))}}else{if(t.helpfulAnswers&&(m(t.helpfulAnswers,u))){if(!v.is(".jive-thread-reply-helpful")){v.addClass("jive-thread-reply-helpful");$j(s).find(".jive-thread-reply-subject strong:first a:first").prepend(jive.discussions.soy.qHelpfulAnswer({question:t,i18n:j}))}}else{v.removeClass("jive-thread-reply-correct");v.removeClass("jive-thread-reply-helpful");v.find(".thisCorrect").remove();v.find(".thisHelpful").remove()}}}function h(s){if(s.questionState=="open"){$j(".jive-answer-type-answered").remove();$j(".jive-answer-type-assumedanswered").remove()}else{if(s.questionState=="assumedResolved"){$j(".jive-answer-type-answered").remove();$j(".jive-answer-type-notanswered").remove()}else{$j(".jive-answer-type-assumedanswered").remove();$j(".jive-answer-type-notanswered").remove()}}$j(".jive-thread-post-subject-content").find("h2").after(jive.discussions.soy.qDisplayQuestionStateMessage({question:s,questionStateEnum:q,i18n:j}));if(s.questionState=="open"){$j(".jive-answer-type-notanswered").find("em").find("a").click(function(){f.markAssumedAnswered(g.renderQuestionStateMessage)})}}function r(s){$j("#jive-question-info").remove();if(!s.threaded){d(s)}$j(".jive-thread-post-message").append(jive.discussions.soy.qDisplayInlineAnswers({question:s,questionStateEnum:q,i18n:j}));$j("a[href='#jive-question-info']").click(function(){return false});$j(".jive-question-info-link").click(function(){$j.scrollTo("#jive-question-info","fast",{offset:{top:-80,left:0}})})}function d(s){if(s.correctAnswer&&!c(s.correctAnswer.ID)){s.correctAnswer.useFullURL=true}s.helpfulAnswers&&s.helpfulAnswers.some(function(t){if(!c(t.ID)){t.useFullURL=true}})}function c(s){return($j("a[name='"+s+"']").length>0)}function m(t,s){return t&&t.some(function(u){return u.ID==s})}this.renderAll=a;this.renderInlineAnswers=r;this.markAsHelpful=o;this.unMarkAsHelpful=b;this.renderQuestionStateMessage=h;this.renderResponses=n;this.renderReply=e;this.renderAnswerButtons=i;this.renderReplyDetails=p};
;
jive.namespace("DiscussionApp");jive.DiscussionApp.Main=function(n){var l=n.resourceID,c=n.resourceType,j=n.resourceVersionID,g=n.listAction,k=n.isModerated,f=n.isThreaded,e=n.sort||"datedesc",m=n.i18n,a,b,i,d,h="#jive-thread-messages-container";a=new jive.DiscussionApp.DiscussionSource(n);b=new jive.DiscussionApp.DiscussionListView(h,n);b.addListener("saveDiscussion",function(r,p){var q=new jive.DiscussionApp.Discussion(r),o=this;a.save(q,{success:function(v,t,u,s){if(p){p()}if(u){b.displayModeratedMessage(t)}else{b.redisplayReplies(t);if(i){i.getQuestion(d.renderAll)}if(s){b.displayModeratedMessage()}else{b.hideSuccess()}}b.scrollToLatestMsg()},error:function(t,s,u){if(p){p()}if(u){o.displayLoginError()}else{s=s||n.i18n.postErrorText;o.displayError(s)}}})});b.addListener("formReady",function(){a.cleanSession();if(!n.draftExists){n.rteOptions.autoSave.start()}n.draftExists=false});if(n.question){i=new jive.DiscussionApp.QuestionSource(l);d=new jive.DiscussionApp.QuestionView(l,i,m);$j(document).ready(function(){i.getQuestion(d.renderAll)})}};
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.user=="undefined"){jive.user={}}if(typeof jive.user.soy=="undefined"){jive.user.soy={}}jive.user.soy.avatar=function(a,c){var b=c||new soy.StringBuilder();if(!a.user.anonymous){b.append('<a href="');jive.app.url({path:"/people/"+soy.$$escapeHtml(a.user.username)},b);b.append('" class="jiveTT-hover-user" onmouseover="quickuserprofile.getUserProfileTooltip(',soy.$$escapeHtml(a.user.ID),');" onmouseout="quickuserprofile.cancelTooltip();">');if(!a.user.enabled){b.append('<img class="jive-avatar" src="');jive.resource.url({path:"/images/jive-avatar-disabled.png"},b);b.append('" width="',soy.$$escapeHtml(a.size),'" height="',soy.$$escapeHtml(a.size),'" border="0"/>')}else{b.append('<img class="jive-avatar" src="');jive.app.url({path:"/people/"+soy.$$escapeHtml(a.user.username)},b);b.append("/avatar/",soy.$$escapeHtml(a.size),".png?a=",soy.$$escapeHtml(a.user.avatarID),'" border="0" height="',soy.$$escapeHtml(a.size),'" width="',soy.$$escapeHtml(a.size),'" alt="',soy.$$escapeHtml(a.user.displayName),'"/>')}b.append("</a>")}else{b.append('<img class="jive-avatar" src="');jive.app.url({path:"/people/guest/avatar"},b);b.append("/",soy.$$escapeHtml(a.size),'.png" border="0" height="',soy.$$escapeHtml(a.size),'" width="',soy.$$escapeHtml(a.size),'" alt="',soy.$$escapeHtml(a.user.displayName),'" title="',soy.$$escapeHtml(a.user.displayName),'"/>')}if(!c){return b.toString()}};jive.user.soy.displayNameLink=function(a,c){var b=c||new soy.StringBuilder();if(!a.user.anonymous){b.append('<a href="');jive.app.url({path:"/people/"+soy.$$escapeHtml(a.user.username)},b);b.append('" onmouseover="quickuserprofile.getUserProfileTooltip(',soy.$$escapeHtml(a.user.ID),');" onmouseout="quickuserprofile.cancelTooltip();" class="jiveTT-hover-user ',(!a.user.enabled)?"jive-user-disabled":"",'">',soy.$$escapeHtml(a.user.displayName),"</a>")}else{b.append("<span>",soy.$$escapeHtml(a.user.displayName),"</span>")}if(!c){return b.toString()}};
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.discussions=="undefined"){jive.discussions={}}if(typeof jive.discussions.soy=="undefined"){jive.discussions.soy={}}jive.discussions.soy.qDisplayQuestionStateMessage=function(a,c){var b=c||new soy.StringBuilder();if(a.question.questionState==a.questionStateEnum.open){jive.discussions.soy.qQuestionNotAnswered(a,b)}else{if(a.question.questionState==a.questionStateEnum.assumed_resolved){jive.discussions.soy.qQuestionAssumedAnswered(a,b)}else{if(a.question.questionState==a.questionStateEnum.resolved){jive.discussions.soy.qQuestionResolved(a,b)}}}if(!c){return b.toString()}};jive.discussions.soy.qQuestionNotAnswered=function(a,c){var b=c||new soy.StringBuilder();b.append('<p class="jive-answer-type jive-answer-type-notanswered font-color-meta" style="">');jive.i18n.soy({string:a.i18n.questionNotAnswered,zero:"<strong>",one:"</strong>"},b);if(a.question.displayMarkAsAssumedAnswered){jive.i18n.soy({string:a.i18n.markQuestionAsAssumedAnswered,zero:'<em style=""><a href="#">',one:soy.$$escapeHtml(a.i18n.leftParen),two:soy.$$escapeHtml(a.i18n.rightParen),three:"</a></em>"},b)}b.append("</p>");if(!c){return b.toString()}};jive.discussions.soy.qQuestionAssumedAnswered=function(a,c){var b=c||new soy.StringBuilder();b.append('<p class="jive-answer-type jive-answer-type-assumedanswered font-color-meta" style="">');jive.i18n.soy({string:a.i18n.questionAssumedAnswered,zero:"<strong>",one:"</strong>"},b);b.append("</p>");if(!c){return b.toString()}};jive.discussions.soy.qQuestionResolved=function(a,c){var b=c||new soy.StringBuilder();b.append('<p class="jive-answer-type jive-answer-type-answered font-color-meta" style="">');jive.i18n.soy({string:a.i18n.questionAnswered,zero:"<strong>",one:"</strong>"},b);b.append("</p>");if(!c){return b.toString()}};jive.discussions.soy.qMarkAsCorrect=function(a,c){var b=c||new soy.StringBuilder();b.append('<div class="jive-thread-reply-btn-correct"><a href="#"><span class="jive-icon-med jive-icon-discussion-correct',(a.question.bridged)?"-bridged":"",'" style="display: inline-block;"></span>',soy.$$escapeHtml(a.i18n.correctAnswer),"</a></div>");if(!c){return b.toString()}};jive.discussions.soy.qMarkAsHelpful=function(a,c){var b=c||new soy.StringBuilder();b.append((a.question.totalNumHelpful-a.question.numHelpful>0&&a.question.helpfulScenarioEnabled)?'<div class="jive-thread-reply-btn-helpful"><a href="#"><span class="jive-icon-med jive-icon-discussion-helpful'+((a.question.bridged)?"-bridged":"")+'" style="display: inline-block;"></span>'+soy.$$escapeHtml(a.i18n.helpfulAnswer)+"</a></div>":"");if(!c){return b.toString()}};jive.discussions.soy.qUnmarkAsCorrect=function(a,c){var b=c||new soy.StringBuilder();b.append('<!-- Unmark as correct --><div class="jive-thread-reply-btn-correct-unmark jive-reply-unmark',(a.question.bridged)?"-bridged":"",'" style="display: inline-block;"><a href="#" class="font-color-normal">',soy.$$escapeHtml(a.i18n.unmarkAsCorrectAnswer),"</a></div>");if(!c){return b.toString()}};jive.discussions.soy.qUnmarkAsHelpful=function(a,c){var b=c||new soy.StringBuilder();b.append('<!-- Unmark as helpful --><div class="jive-thread-reply-btn-helpful-unmark jive-reply-unmark',(a.question.bridged)?"-bridged":"",'" style="display: inline-block;"><a href="#" class="font-color-normal">',soy.$$escapeHtml(a.i18n.unmarkAsHelpfulAnswer),"</a></div>");if(!c){return b.toString()}};jive.discussions.soy.qHelpfulAnswerFadeOutText=function(a,c){var b=c||new soy.StringBuilder();if(a.question.totalNumHelpful-a.question.numHelpful>1){b.append('<span class="helpfulRemaining font-color-meta">');jive.i18n.soy({string:a.i18n.someHelpfulAnswersLeft,zero:"<strong>"+soy.$$escapeHtml(a.question.totalNumHelpful-a.question.numHelpful)+"</strong>"},b);b.append("</span>")}else{if(a.question.totalNumHelpful-a.question.numHelpful==1){b.append('<span class="helpfulRemaining font-color-meta">');jive.i18n.soy({string:a.i18n.oneHelpfulAnswerLeft,zero:"<strong>"+soy.$$escapeHtml(a.question.totalNumHelpful-a.question.numHelpful)+"</strong>"},b);b.append("</span>")}else{b.append('<span class="helpfulRemaining font-color-meta">',soy.$$escapeHtml(a.i18n.allHelpfulAnswersAwarded),"</span>")}}if(!c){return b.toString()}};jive.discussions.soy.qHelpfulAnswer=function(a,c){var b=c||new soy.StringBuilder();b.append('<span class="thisHelpful" style=""><span class="jive-icon-med jive-icon-discussion-helpful"/><span class="jive-thread-reply-message-helpful-label">',soy.$$escapeHtml(a.i18n.helpfulAnswer),"</span></span>");if(!c){return b.toString()}};jive.discussions.soy.qCorrectAnswer=function(a,c){var b=c||new soy.StringBuilder();b.append('<span class="thisCorrect" style=""><span class="jive-icon-med jive-icon-discussion-correct"/><span class="jive-thread-reply-message-correct-label">',soy.$$escapeHtml(a.i18n.correctAnswer),"</span></span>");if(!c){return b.toString()}};jive.discussions.soy.qDisplayInlineAnswers=function(a,c){var b=c||new soy.StringBuilder();b.append('<div id="jive-question-info"><!-- Embedded Correct Answer -->');if(a.question.questionState==a.questionStateEnum.resolved&&a.question.correctAnswer){jive.discussions.soy.qDisplayInlineCorrectAnswer(a,b)}if(a.question.numHelpful>0){if(a.question.numHelpful>1){jive.discussions.soy.qDisplayInlineHelpfulAnswerLinks(soy.$$augmentData(a,{plural:true}),b)}else{jive.discussions.soy.qDisplayInlineHelpfulAnswerLinks(soy.$$augmentData(a,{plural:false}),b)}}b.append("</div>");if(!c){return b.toString()}};jive.discussions.soy.qDisplayInlineCorrectAnswer=function(a,c){var b=c||new soy.StringBuilder();b.append('<div id="jive-inline-correct-answer" class="clearfix" style="display:block;"><div id="jive-inline-correct-answer-header"><strong class="jive-thread-reply-message-correct-label">',soy.$$escapeHtml(a.i18n.correctAnswer),'&nbsp;</strong><span class="font-color-meta">',a.i18n.byWord);jive.user.soy.displayNameLink({user:a.question.correctAnswer.user},b);b.append("&nbsp;",a.i18n.onWord,soy.$$escapeHtml(a.question.correctAnswer.modificationDate),'</span></div><div id="jive-inline-correct-answer-body"><span class="jive-author-avatar-container">');jive.user.soy.avatar({user:a.question.correctAnswer.user,size:32},b);b.append("</span>",a.question.correctAnswerHtml,'<strong><a href="',(a.question.correctAnswer.useFullURL)?soy.$$escapeHtml(a.question.correctAnswer.url):"#"+soy.$$escapeHtml(a.question.correctAnswer.ID),'" class="jive-inline-correct-answer-context-link ',(!a.question.correctAnswer.useFullURL)?"localScroll":"",'"><span class="jive-icon-sml jive-icon-arrow-generic-down"></span>',soy.$$escapeHtml(a.i18n.seeAnswerInContext),"</a></strong></div></div>");if(!c){return b.toString()}};jive.discussions.soy.qDisplayInlineHelpfulAnswerLinks=function(a,g){var e=g||new soy.StringBuilder();e.append('<div id="jive-inline-helpful-answers" class="font-color-meta" style="display:block;"><strong class="jive-thread-reply-message-helpful-label"><span class="jive-icon-med jive-icon-discussion-helpful"/>',(a.plural)?soy.$$escapeHtml(a.i18n.helpfulAnswers):soy.$$escapeHtml(a.i18n.helpfulAnswer),"</strong>",a.i18n.byWord,'<span class="jive-inline-helpful-answer-links">');var f=a.question.helpfulAnswers;var c=f.length;for(var d=0;d<c;d++){var b=f[d];jive.discussions.soy.qDisplayHelpfulAnswerLink({message:b,i18n:a.i18n},e);e.append((!(d==c-1))?",":"","&nbsp;")}e.append("</span></div>");if(!g){return e.toString()}};jive.discussions.soy.qDisplayHelpfulAnswerLink=function(a,c){var b=c||new soy.StringBuilder();b.append((!a.message.useFullURL)?'<a href="#'+soy.$$escapeHtml(a.message.ID)+'" class="replyToName localScroll"':'<a href="'+soy.$$escapeHtml(a.message.url)+'" class="replyToName"','title="',soy.$$escapeHtml(a.i18n.seeThisAnswer),'">',soy.$$escapeHtml(a.message.user.displayName),"</a>");if(!c){return b.toString()}};
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.DiscussionApp=="undefined"){jive.DiscussionApp={}}if(typeof jive.DiscussionApp.soy=="undefined"){jive.DiscussionApp.soy={}}jive.DiscussionApp.soy.renderReply=function(a,c){var b=c||new soy.StringBuilder();b.append('<li class="addReply jive-js-addReply" style="display:none"><div msgID="',soy.$$escapeHtml(a.messageID),'" class="jive-thread-reply-indent0 jive-reply-add-inline"><div class="jive-thread-reply-indent-shadow"><div class="jive-thread-reply jive-thread-reply-self clearfix"><div class="jive-thread-reply-inline clearfix"><strong class="font-color-meta">',soy.$$escapeHtml(a.i18n.forumThrdReplyTo),' <span class="replyToName">',soy.$$escapeHtml(a.userName),'</span> <img src="');jive.resource.url({path:"/images/inline-reply-arrow.png"},b);b.append('"></strong><a class="font-color-meta advEditor" href="javascript:void(0);">',soy.$$escapeHtml(a.i18n.advEditor),'</a><p class="jive-discussion-post"></p></div></div></div></div></li>');if(!c){return b.toString()}};jive.DiscussionApp.soy.rteMsgQuote=function(a,c){var b=c||new soy.StringBuilder();b.append('<div class="jive-rendered-content"><blockquote class="jive-quote"><span class="jive-quote-header">');if(a.isAnonymous){b.append(soy.$$escapeHtml(a.i18n.postGuestWroteLabel))}else{jive.i18n.soy({string:a.i18n.postUserWroteLabel,zero:soy.$$escapeHtml(a.userName)},b)}b.append(":</span><br/><br/>",a.msgBody,"</blockquote></div>");if(!c){return b.toString()}};
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.Shared=="undefined"){jive.Shared={}}if(typeof jive.Shared.soy=="undefined"){jive.Shared.soy={}}jive.Shared.soy.formWaitingOverlay=function(a,c){var b=c||new soy.StringBuilder();b.append('<div class="jive-js-form-disable jive-form-waiting-disable"><div class="',soy.$$escapeHtml(a.bgCssClass),'"></div><span class="jive-js-load-indicator jive-form-waiting">',soy.$$escapeHtml(a.i18n.formSubmitPleaseWait),"</span></div>");if(!c){return b.toString()}};
;

// Provide a default path to dwr.engine
if (dwr == null) var dwr = {};
if (dwr.engine == null) dwr.engine = {};
if (DWREngine == null) var DWREngine = dwr.engine;

if (WikiTextConverter == null) var WikiTextConverter = {};
WikiTextConverter._path = '/dwr';
WikiTextConverter.getPreferredEditorMode = function(callback) {
  dwr.engine._execute(WikiTextConverter._path, 'WikiTextConverter', 'getPreferredEditorMode', false, callback);
}
WikiTextConverter.cleanUpHtml = function(p0, p1, callback) {
  dwr.engine._execute(WikiTextConverter._path, 'WikiTextConverter', 'cleanUpHtml', p0, p1, false, callback);
}
WikiTextConverter.convertFromWiki = function(p0, p1, callback) {
  dwr.engine._execute(WikiTextConverter._path, 'WikiTextConverter', 'convertFromWiki', p0, p1, false, callback);
}
WikiTextConverter.convertToWiki = function(p0, p1, callback) {
  dwr.engine._execute(WikiTextConverter._path, 'WikiTextConverter', 'convertToWiki', p0, p1, false, callback);
}
WikiTextConverter.convertToPreviewFromXhtml = function(p0, p1, callback) {
  dwr.engine._execute(WikiTextConverter._path, 'WikiTextConverter', 'convertToPreviewFromXhtml', p0, p1, false, callback);
}
WikiTextConverter.convertToPreviewFromWiki = function(p0, p1, callback) {
  dwr.engine._execute(WikiTextConverter._path, 'WikiTextConverter', 'convertToPreviewFromWiki', p0, p1, false, callback);
}
WikiTextConverter.setPreferredEditorMode = function(p0, callback) {
  dwr.engine._execute(WikiTextConverter._path, 'WikiTextConverter', 'setPreferredEditorMode', p0, false, false, callback);
}

;

// Provide a default path to dwr.engine
if (dwr == null) var dwr = {};
if (dwr.engine == null) dwr.engine = {};
if (DWREngine == null) var DWREngine = dwr.engine;

if (JiraManager == null) var JiraManager = {};
JiraManager._path = '/dwr';
JiraManager.getRelatedIssues = function(p0, p1, callback) {
  dwr.engine._execute(JiraManager._path, 'JiraManager', 'getRelatedIssues', p0, p1, callback);
}
JiraManager.addLink = function(p0, p1, p2, callback) {
  dwr.engine._execute(JiraManager._path, 'JiraManager', 'addLink', p0, p1, p2, callback);
}
JiraManager.removeLink = function(p0, p1, p2, callback) {
  dwr.engine._execute(JiraManager._path, 'JiraManager', 'removeLink', p0, p1, p2, callback);
}

;
jive.Rate=function(g,f,o,r,v,k,x,q){var n=jive.rest.url("/rating/"+o+"/"+r);var p;var c;var b;var d;var t;var e;var s;$j.getJSON(n,function(z){p=z.ratingInfo;w();u();i();if(e){var y={body:"",element:s,i18n:k,containerType:g,containerID:f,resourceType:o,resourceID:r};new jive.Rate.Main(y)}});function u(){if(q){s=$j('.jive-content-rating[data-guid="'+q+'"]')}else{s=$j("#jive-content-rating")}}function w(){c=(p.ratedByUser&&p.userRating.score>0)?p.userRating.score:0;b=p.userRating?p.userRating.description:"";d=false;t=p.availableRatings;e=p.commentable&&x}function h(){$j.getJSON(n+"/mean",function(y){j(y)});$j.getJSON(n+"/count",function(y){l(y)});return false}function j(y){s.find(".jive-content-avgrating-score").attr("title",k.avgUserRatingLabeli18n+": "+y);$j.each(t,function(z,A){s.find(".jive-icon-avgrating-"+A.score).toggleClass("jive-icon-rate-avg-on",y>=A.score).toggleClass("jive-icon-rate-avg-half",y<A.score&&y>=A.score-0.5).toggleClass("jive-icon-rate-avg-off",y<A.score-0.5)})}function l(y){var z=(y==1)?k.rateRatingLabel:k.rateRatingsLabel;s.find(".jive-content-avgrating-count").text("("+y+" "+z+")")}function a(z){d=true;var y=s.find(".j-rating-comment-instruct .font-color-okay strong");y.html(k.rateSavingText);if(!s.find(".j-rating-container").hasClass("j-rating-container-active")){s.find(".j-rating-container").addClass("j-rating-container-active");s.find(".j-rating-comment-instruct").css("opacity","0").animate({width:"toggle",opacity:1},500)}$j.post(n,{score:z},function(){h();c=z;m(z);y.html(k.rateSavedText);if(!e){s.find(".j-rating-comment-instruct").fadeOut(2500,function(){s.find(".j-rating-container").removeClass("j-rating-container-active")})}d=false})}function m(y){$j.each(t,function(z,A){if(y==0){s.find(".jive-content-userrating-desc").html("")}if(y==A.score){s.find(".jive-content-userrating-desc").html(A.description)}s.find(".jive-icon-userrating-"+A.score).toggleClass("jive-icon-rate-usr-on",y>=A.score).toggleClass("jive-icon-rate-usr-off",y<A.score)})}function i(){var y=jive.rate.soy.renderRating({ratingInfo:p,i18n:k});if(p.rateable){y+=jive.rate.soy.renderUserRating({ratingInfo:p,userRating:c,commentable:e,ratingDescription:b,i18n:k})}s.append(y);s.find(".jive-content-userrating").show();$j.each(p.availableRatings,function(A,z){s.find(".jive-icon-userrating-"+z.score).bind("click",function(){a(z.score)});s.find(".jive-icon-userrating-"+z.score).hover(function(){m(z.score)},function(){m(c)})})}};
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.rate=="undefined"){jive.rate={}}if(typeof jive.rate.soy=="undefined"){jive.rate.soy={}}jive.rate.soy.renderRating=function(a,g){var c=g||new soy.StringBuilder();c.append('<div class="jive-content-avgrating"><div class="jive-content-avgrating-title">',soy.$$escapeHtml(a.i18n.avgUserRatingTitlei18n),'</div><div class="jive-content-avgrating-score" title="',soy.$$escapeHtml(a.i18n.avgUserRatingLabeli18n),": ",soy.$$escapeHtml(a.ratingInfo.meanRating),'">');var f=a.ratingInfo.availableRatings;var d=f.length;for(var b=0;b<d;b++){var e=f[b];c.append('<span class="jive-icon-avgrating-',soy.$$escapeHtml(e.score)," jive-icon-med jive-icon-rate-avg-",(a.ratingInfo.meanRating>=e.score)?"on":(a.ratingInfo.meanRating>=e.score-0.5)?"half":"off",'"></span>')}c.append('</div><div class="jive-content-rating-print" style="display: none;">',soy.$$escapeHtml(a.ratingInfo.meanRating),'</div><div class="jive-content-avgrating-count">(',soy.$$escapeHtml(a.ratingInfo.ratingCount)," ",(a.ratingInfo.ratingCount==1)?soy.$$escapeHtml(a.i18n.rateRatingLabel):soy.$$escapeHtml(a.i18n.rateRatingsLabel),")</div></div>");if(!g){return c.toString()}};jive.rate.soy.renderUserRating=function(a,g){var b=g||new soy.StringBuilder();b.append('<div class="jive-content-userrating jive-content-myrating-print"><div class="j-rating-container clearfix"><div class="j-rating clearfix"><div class="jive-content-userrating-title">',soy.$$escapeHtml(a.i18n.myRatingLabel),' <span class="jive-content-userrating-desc">',soy.$$escapeHtml(a.ratingDescription),'</span></div><div class="jive-content-userrating-score">');var d=a.ratingInfo.availableRatings;var f=d.length;for(var e=0;e<f;e++){var c=d[e];b.append('<a href="javascript:void(0);" class="jive-icon-userrating-',soy.$$escapeHtml(c.score)," jive-icon-med jive-icon-rate-usr-",(a.userRating>=c.score)?"on":"off",'" title="',soy.$$escapeHtml(c.description),"(",soy.$$escapeHtml(c.score),')"></a>')}b.append('<div class="jive-content-userrating-saved" style="display: none;"></div></div></div><div class="j-rating-comment-instruct"><p class="font-color-okay"><strong>',soy.$$escapeHtml(a.i18n.rateRatingSaved),"</strong></p>",(a.commentable)?'<p class="font-color-meta"><a href="#" class="j-comment-on-rating"><strong>'+soy.$$escapeHtml(a.i18n.writeAReview)+"</strong></a></p>":"",'</div></div></div><div class="j-rating-comment"><ul class="jive-comment"><li><div class="jive-comment-arrow"></div><div class="jive-comment-content"><p class="jive-comment-meta font-color-meta-light">',soy.$$escapeHtml(a.i18n.commentOnRating),'</p><div class="jive-rating-comment-body"> </div></div></li></ul></div>');if(!g){return b.toString()}};
;
jive.namespace("Rate");jive.Rate.Main=function(k){var j=k.containerID;var g=k.containerType;var a=k.container;var b=k.resourceType;var i=k.resourceID;var c=k.i18n;var h=k.body,d=k.element?k.element:"#jive-rating-content",f;function e(m,l){window.jive.CommentApp.comments.closeForms();if(f){f.remove()}jive.CommentApp.comments.renderForm(jive.CommentApp.FormView,m,$j.extend({commentMode:"rate",i18n:c},l))}$j(document).ready(function(){var l=$j(d);$j(function(){l.find(".j-comment-on-rating").click(function(){e(l.find(".jive-rating-comment-body"),{formActionContainer:".jive-rating-comment-body",bodyContent:h,containerType:g,containerID:j,resourceType:b,resourceID:i});l.find(".jive-content-avgrating").css("height","30px").animate({padding:"0",width:"0",opacity:"0"},500,function(){l.find(".j-rating-comment").animate({opacity:"toggle"},800).slideDown()});l.find(".jive-content-userrating").animate({padding:"0"},500).css("border","none");l.find(".j-rating-comment-instruct").animate({width:"0",opacity:"0",padding:"0"}).css("border","none");l.find(".j-rating-container").removeClass("j-rating-container-active");l.find(".j-rating-container").addClass("j-rating-container-active-tab");return false})});var m=function(){l.find(".j-rating-comment").hide();l.find(".jive-content-userrating").removeAttr("style");l.find(".jive-content-avgrating").removeAttr("style");l.find(".j-rating-comment-instruct").removeAttr("style");l.find(".j-rating-container").removeClass("j-rating-container-active");l.find(".j-rating-container").removeClass("j-rating-container-active-tab")};jive.CommentApp.comments.addCommentListViewListener("cancelComment",m);jive.CommentApp.comments.addCommentListViewListener("savedComment",m);jive.CommentApp.comments.addCommentListViewListener("createComment",m);jive.CommentApp.comments.addCommentListViewListener("replyComment",m);jive.CommentApp.comments.addCommentListViewListener("editComment",m)})};
;
